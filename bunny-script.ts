import * as process from "node:process";
import { Buffer } from "node:buffer";
globalThis.process ??= process;
globalThis.Buffer ??= Buffer;
globalThis.global ??= globalThis;
var O5=Object.create;var{getPrototypeOf:l5,defineProperty:sT,getOwnPropertyNames:v5}=Object;var z5=Object.prototype.hasOwnProperty;var Z5=(h,P,T)=>{T=h!=null?O5(l5(h)):{};let m=P||!h||!h.__esModule?sT(T,"default",{value:h,enumerable:!0}):T;for(let _ of v5(h))if(!z5.call(m,_))sT(m,_,{get:()=>h[_],enumerable:!0});return m};var B=(h,P)=>()=>(P||h((P={exports:{}}).exports,P),P.exports);var Dh=(h,P)=>{for(var T in P)sT(h,T,{get:P[T],enumerable:!0,configurable:!0,set:(m)=>P[T]=()=>m})};var v=(h,P)=>()=>(h&&(P=h(h=0)),P);var Q5=((h)=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(h,{get:(P,T)=>(typeof require<"u"?require:P)[T]}):h)(function(h){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});function a(...h){return(P)=>h.reduce((T,m)=>m(T),P)}var g_=(h)=>(P)=>P.filter(h),n=(h)=>(P)=>P.map(h),t=(h,P)=>(T)=>T.reduce(h,P),i_=(h)=>h.filter(Boolean),zh=(h)=>{let P=!1,T;return()=>{if(!P)T=h(),P=!0;return T}},Nh=(h)=>{let P=!1,T;return[()=>{if(!P)T=h(),P=!0;return T},(G)=>{if(G===null)P=!1;else T=G,P=!0}]},q_=(h)=>({ok:!0,value:h}),E_=(h)=>({ok:!1,response:h}),V_=(h)=>async(P)=>{let T=[];for(let m of P)T.push(await h(m));return T};var b_=(h,P)=>{if(h.length!==P.length)return!1;let T=new TextEncoder,m=T.encode(h),_=T.encode(P),G=0;for(let l=0;l<m.length;l++)G|=m[l]^_[l];return G===0},hm=(h)=>{let P=new Uint8Array(h);return crypto.getRandomValues(P),P},C1=(h)=>{let P="";for(let T of h)P+=String.fromCharCode(T);return btoa(P)},J5=(h)=>{return C1(h).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},x1=(h)=>{let P=atob(h),T=new Uint8Array(P.length);for(let m=0;m<P.length;m++)T[m]=P.charCodeAt(m);return T},fh=()=>{let h=hm(32);return J5(h)},eT="enc:1:",D_=(h)=>{let P=x1(h);if(P.length!==32)throw Error(`DB_ENCRYPTION_KEY must be 32 bytes (256 bits), got ${P.length} bytes`);return P},X5,M5,k_=()=>{return D_("MDEyMzQ1Njc4OWFiY2RlZjAxMjM0NTY3ODlhYmNkZWY="),"MDEyMzQ1Njc4OWFiY2RlZjAxMjM0NTY3ODlhYmNkZWY="},o_=async()=>{let h=k_();try{let m=X5();if(m.source===h)return m.key}catch{}let P=D_(h),T=await crypto.subtle.importKey("raw",P,{name:"AES-GCM"},!1,["encrypt","decrypt"]);return M5({key:T,source:h}),T},y_=()=>{k_()},Zh=async(h)=>{let P=await o_(),T=hm(12),_=new TextEncoder().encode(h),G=await crypto.subtle.encrypt({name:"AES-GCM",iv:T},P,_),l=C1(T),z=C1(new Uint8Array(G));return`${eT}${l}:${z}`},kh=async(h)=>{if(!h.startsWith(eT))throw Error("Invalid encrypted data format");let P=await o_(),T=h.slice(eT.length),m=T.indexOf(":");if(m===-1)throw Error("Invalid encrypted data format: missing IV separator");let _=T.slice(0,m),G=T.slice(m+1),l=x1(_),z=x1(G),X=await crypto.subtle.decrypt({name:"AES-GCM",iv:l},P,z);return new TextDecoder().decode(X)},L5=600000,c5=1000,Y5=()=>process.env.TEST_PBKDF2_ITERATIONS?c5:L5,p_=32,j_="pbkdf2",F5=(h,P)=>{let T=0;for(let m=0;m<h.length;m++)T|=h[m]^P[m];return T===0},n_=async(h,P,T)=>{let m=new TextEncoder,_=await crypto.subtle.importKey("raw",m.encode(h),"PBKDF2",!1,["deriveBits"]),G=await crypto.subtle.deriveBits({name:"PBKDF2",salt:P,iterations:T,hash:"SHA-256"},_,p_*8);return new Uint8Array(G)},Pm=async(h)=>{let P=hm(16),T=Y5(),m=await n_(h,P,T);return`${j_}:${T}:${C1(P)}:${C1(m)}`},t_=async(h,P)=>{if(!P.startsWith(`${j_}:`))return!1;let T=P.split(":");if(T.length!==4)return!1;let m=Number.parseInt(T[1],10),_=x1(T[2]),G=x1(T[3]);if(G.length!==p_)return!1;let l=await n_(h,_,m);return F5(l,G)};var g1=v(()=>{[X5,M5]=Nh(()=>{throw Error("Key cache not initialized")})});import{createClient as d5}from"@libsql/client";var U5=()=>{return d5({url:"test",authToken:"test"})},W5,dQ,H=()=>W5(),Qh=async(h,P)=>{let T=await H().execute({sql:h,args:P});return T.rows.length===0?null:T.rows[0]},oh=async(h,P,T)=>{await H().execute({sql:`DELETE FROM ${h} WHERE ${P} = ?`,args:[T]})};var Hh=v(()=>{[W5,dQ]=Nh(U5)});var S5=1e4,yh,N5=(h)=>{let P=yh.get(h);if(!P)return;if(Date.now()-P.cachedAt>S5){yh.delete(h);return}return P.session},s_=(h,P)=>{yh.set(h,{session:P,cachedAt:Date.now()})},K5=(h)=>{yh.delete(h)},e_=()=>{yh.clear()},hf=async(h,P,T)=>{await H().execute({sql:"INSERT INTO sessions (token, csrf_token, expires) VALUES (?, ?, ?)",args:[h,P,T]}),s_(h,{token:h,csrf_token:P,expires:T})},Pf=async(h)=>{let P=N5(h);if(P!==void 0)return P;let T=await Qh("SELECT token, csrf_token, expires FROM sessions WHERE token = ?",[h]);return s_(h,T),T},xP=async(h)=>{K5(h),await oh("sessions","token",h)},Tf=async()=>{e_(),await H().execute("DELETE FROM sessions")},Tm=async()=>{return(await H().execute("SELECT token, csrf_token, expires FROM sessions ORDER BY expires DESC")).rows},mf=async(h)=>{let P=yh.get(h);if(e_(),P)yh.set(h,P);await H().execute({sql:"DELETE FROM sessions WHERE token != ?",args:[h]})};var i1=v(()=>{Hh();yh=new Map});var Gh,q1=async(h)=>{let P=await H().execute({sql:"SELECT value FROM settings WHERE key = ?",args:[h]});if(P.rows.length===0)return null;return P.rows[0].value},G1=async(h,P)=>{await H().execute({sql:"INSERT OR REPLACE INTO settings (key, value) VALUES (?, ?)",args:[h,P]})},A5,$5,H5,I5,gP=async()=>{let h=H5(),P=A5();if(h&&P)return!0;let m=await q1(Gh.SETUP_COMPLETE)==="true";if(m)$5(!0),I5(!0);return m},_f=async(h,P,T)=>{let m=await Pm(h),_=await Zh(m);if(await G1(Gh.ADMIN_PASSWORD,_),P){let G=await Zh(P);await G1(Gh.STRIPE_KEY,G)}await G1(Gh.CURRENCY_CODE,T),await G1(Gh.SETUP_COMPLETE,"true")},ff=async()=>{let h=await q1(Gh.STRIPE_KEY);if(!h)return null;return kh(h)},E1=async()=>{return await q1(Gh.STRIPE_KEY)!==null},Gf=async(h)=>{let P=await Zh(h);await G1(Gh.STRIPE_KEY,P)},Of=async()=>{return await q1(Gh.CURRENCY_CODE)||"GBP"},R5=async()=>{let h=await q1(Gh.ADMIN_PASSWORD);if(!h)return null;return kh(h)},iP=async(h)=>{let P=await R5();if(P===null)return!1;return t_(h,P)},lf=async(h)=>{let P=await Pm(h),T=await Zh(P);await G1(Gh.ADMIN_PASSWORD,T),await Tf()};var V1=v(()=>{g1();Hh();i1();Gh={ADMIN_PASSWORD:"admin_password",STRIPE_KEY:"stripe_key",CURRENCY_CODE:"currency_code",SETUP_COMPLETE:"setup_complete"},[A5,$5]=Nh(()=>!1),[H5,I5]=Nh(()=>!1)});var mm=async()=>{let h=await ff();return h&&h.trim()!==""?h:null},vf=async()=>{return await mm()!==null},zf=async()=>{return Of()},Zf=()=>{return"test.com"};var b1=v(()=>{V1()});var E5=(h)=>{let P=[],T=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/:(\w+)/g,(_,G)=>{return P.push(G),"(\\d+)"}),m=new RegExp(`^${T}$`);return m.paramNames=P,m},V5=(h)=>{let P=h.indexOf(" ");return{method:h.slice(0,P),path:h.slice(P+1)}},b5=(h)=>{let P=new Map;for(let[T,m]of Object.entries(h)){let{method:_,path:G}=V5(T),l=E5(G),z=P.get(_)??[];z.push({regex:l,paramNames:l.paramNames,handler:m}),P.set(_,z)}return P},D5=(h,P)=>{let T={};for(let m=0;m<h.length;m++){let _=h[m],G=P[m+1];if(_!==void 0&&G!==void 0)T[_]=G}return T},k5=(h,P)=>{let T=P.match(h.regex);if(!T)return null;return{handler:h.handler,params:D5(h.paramNames,T)}},o5=(h,P,T)=>{let m=h.get(P);if(!m)return null;for(let _ of m){let G=k5(_,T);if(G)return G}return null},Jh=(h)=>{let P=b5(h);return async(T,m,_,G)=>{let l=o5(P,_,m);if(!l)return null;return l.handler(T,l.params,G)}},b=(h)=>h;var p5=(h)=>h.replace(/_([a-z])/g,(P,T)=>T.toUpperCase()),j5=(h)=>t((P,T)=>{return P[T]=p5(T),P},{})(h),n5=(h,P)=>{if(h===void 0&&P.default)return P.default();return h},t5=async(h,P)=>{if(P.write&&h!==null&&h!==void 0)return P.write(h);return h},r5=(h,P)=>{let T=P.map(()=>"?").join(", ");return`INSERT INTO ${h} (${P.join(", ")}) VALUES (${T})`},a5=(h,P,T)=>{let m=P.map((_)=>`${_} = ?`).join(", ");return`UPDATE ${h} SET ${m} WHERE ${T} = ?`},bP=(h)=>{let{name:P,primaryKey:T,schema:m}=h,_=Object.keys(m),G=_.filter((d)=>!m[d].generated),l=j5(G),z=(d,c)=>{let S=l[c]??c;return d[S]},X=async(d)=>{let c={...d};for(let S of _){let A=m[S];if(A.read&&c[S]!==null)c[S]=await A.read(c[S])}return c},L=async(d,c)=>{let S=m[d],A=z(c,d),V=n5(A,S);if(V===void 0)return null;let w=await t5(V,S);return[d,w]},Z=async(d)=>{let c={};for(let S of G){let A=await L(S,d);if(A!==null)c[A[0]]=A[1]}return c},J=(d,c,S)=>{let A=l[d]??d,V=c[A];if(V!==void 0)return V;if(d in S)return S[d];return null},Q=async(d)=>{let c=await Z(d),S=Object.keys(c),A=S.map((p)=>c[p]),V=await H().execute({sql:r5(P,S),args:A}),w={};if(m[T].generated)w[T]=Number(V.lastInsertRowid);for(let p of G)w[p]=J(p,d,c);return w},F=(d)=>g_((c)=>{return(l[c]??c)in d})(G),Y=async(d,c)=>{let S=await Z(c),A=F(c);if(A.length===0)return U(d);let V=[...A.map((p)=>S[p]),d];if((await H().execute({sql:a5(P,A,T),args:V})).rowsAffected===0)return null;return U(d)},U=async(d)=>{let c=await Qh(`SELECT * FROM ${P} WHERE ${T} = ?`,[d]);return c?X(c):null};return{name:P,primaryKey:T,schema:m,inputKeyMap:l,insert:Q,update:Y,findById:U,deleteById:async(d)=>{await H().execute({sql:`DELETE FROM ${P} WHERE ${T} = ?`,args:[d]})},findAll:async()=>{let c=(await H().execute(`SELECT * FROM ${P}`)).rows;return V_(X)(c)},fromDb:X,toDbValues:Z}},Wf=(h)=>async(P)=>P===null?null:h(P),s;var _m=v(()=>{Hh();s={generated:()=>({generated:!0}),withDefault:(h)=>({default:h}),encrypted:(h,P)=>({write:h,read:P}),encryptedNullable:(h,P)=>({write:Wf(h),read:Wf(P)}),simple:()=>({}),transform:(h,P)=>({write:h,read:P})}});var DP,Bf=(h)=>DP.findById(h),Sf=async(h)=>{await oh("attendees","event_id",h),await DP.deleteById(h)},Nf=async()=>{return(await H().execute(`
    SELECT e.*, COALESCE(SUM(a.quantity), 0) as attendee_count
    FROM events e
    LEFT JOIN attendees a ON e.id = a.event_id
    GROUP BY e.id
    ORDER BY e.created DESC
  `)).rows},Ih=async(h)=>Qh(`SELECT e.*, COALESCE(SUM(a.quantity), 0) as attendee_count
     FROM events e
     LEFT JOIN attendees a ON e.id = a.event_id
     WHERE e.id = ?
     GROUP BY e.id`,[h]);var ph=v(()=>{Hh();_m();DP=bP({name:"events",primaryKey:"id",schema:{id:s.generated(),created:s.withDefault(()=>new Date().toISOString()),name:s.simple(),description:s.simple(),max_attendees:s.simple(),thank_you_url:s.simple(),unit_price:s.simple(),max_quantity:s.withDefault(()=>1),webhook_url:s.simple()}})});class Kh{html;constructor(h){this.html=h}toString(){return this.html}}var Kf=(h)=>h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),s5,Af=(h)=>h instanceof Kh,fm=(h)=>{if(h===null||h===void 0||h===!1)return"";if(h===!0)return"";if(Af(h))return h.html;if(Array.isArray(h))return h.map(fm).join("");return Kf(String(h))},e5=(h,P)=>{if(P===null||P===void 0||P===!1)return"";if(P===!0)return` ${h}`;return` ${h}="${Kf(String(P))}"`},O=(h,P)=>{let{children:T,...m}=P??{};if(typeof h==="function"){let l=h({...m,children:T});return Af(l)?l:new Kh(l)}let _=Object.entries(m).map(([l,z])=>e5(l,z)).join("");if(s5[h])return new Kh(`<${h}${_}>`);let G=fm(T);return new Kh(`<${h}${_}>${G}</${h}>`)},k1=({children:h})=>new Kh(fm(h)),I=({html:h})=>new Kh(h);var e=v(()=>{s5={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}});var g=v(()=>{e()});var $f=(h)=>h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),u=({title:h,children:P})=>new Kh("<!DOCTYPE html>"+O("html",{lang:"en",children:[O("head",{children:[O("meta",{charset:"UTF-8"},void 0,!1,void 0,this),O("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},void 0,!1,void 0,this),O("title",{children:h},void 0,!1,void 0,this),O("link",{rel:"stylesheet",href:"/mvp.css"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("body",{children:O("main",{children:P},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this));var Xh=v(()=>{e();g()});var Hf=(h,P)=>String(O(u,{title:"Payment Successful",children:[O("header",{children:O("h1",{children:"Payment Successful!"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("section",{children:[O("div",{class:"success",children:O("p",{children:["Thank you for your payment. Your ticket for ",O("strong",{children:h.name},void 0,!1,void 0,this)," has been confirmed."]},void 0,!0,void 0,this)},void 0,!1,void 0,this),O("p",{children:"You will be redirected shortly..."},void 0,!1,void 0,this),O("p",{children:O("a",{href:P,children:"Click here if you are not redirected"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("script",{children:O(I,{html:`setTimeout(function() { window.location.href = "${$f(P)}"; }, 3000);`},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)),If=(h,P)=>String(O(u,{title:"Payment Cancelled",children:[O("header",{children:O("h1",{children:"Payment Cancelled"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("section",{children:[O("p",{children:["Your payment was cancelled. Your ticket reservation for ",O("strong",{children:h.name},void 0,!1,void 0,this)," has been removed."]},void 0,!0,void 0,this),O("p",{children:O("a",{href:P,children:O("i",{children:"Try again"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)),Rf=(h)=>String(O(u,{title:"Payment Error",children:[O("header",{children:O("h1",{children:"Payment Error"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("section",{children:[O("div",{class:"error",children:O("p",{children:h},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("p",{children:O("a",{href:"/",children:"Return to home"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this));var Gm=v(()=>{e();Xh();g()});var h9=(h)=>h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),P9,T9=(h,P="")=>String(O("div",{class:"form-group",children:[O("label",{for:h.name,children:h.label},void 0,!1,void 0,this),h.type==="textarea"?O("textarea",{id:h.name,name:h.name,rows:"3",required:h.required,placeholder:h.placeholder,children:O(I,{html:h9(P)},void 0,!1,void 0,this)},void 0,!1,void 0,this):O("input",{type:h.type,id:h.name,name:h.name,value:P||void 0,required:h.required,placeholder:h.placeholder,min:h.min,pattern:h.pattern},void 0,!1,void 0,this),h.hint&&O("small",{style:"color: #666; display: block; margin-top: 0.25rem;",children:h.hint},void 0,!1,void 0,this)]},void 0,!0,void 0,this)),r=(h,P={})=>a(n((T)=>T9(T,String(P[T.name]??""))),P9)(h),m9=(h,P)=>h.type==="number"?P?Number.parseInt(P,10):null:P||null,_9=(h,P)=>{let m=(h.get(P.name)||"").trim();if(P.required&&!m)return{valid:!1,error:`${P.label} is required`};if(P.validate&&m){let _=P.validate(m);if(_)return{valid:!1,error:_}}return{valid:!0,value:m9(P,m)}},Oh=(h,P)=>{let T={};for(let m of P){let _=_9(h,m);if(!_.valid)return _;T[m.name]=_.value}return{valid:!0,values:T}},Rh=(h)=>h?String(O("div",{class:"error",children:h},void 0,!1,void 0,this)):"";var hh=v(()=>{e();g();P9=t((h,P)=>h+P,"")});var wf=(h)=>{if(h.startsWith("/"))return null;try{let P=new URL(h);if(P.protocol!=="https:"&&P.protocol!=="http:")return"URL must use https:// or http://";return null}catch{return"Invalid URL format"}},f9=(h)=>{let P=Number.parseInt(h,10);if(Number.isNaN(P)||P<0)return"Price must be 0 or greater";return null},G9=(h)=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h))return"Please enter a valid email address";return null},kP,O1,oP,yP,pP,jP;var Ph=v(()=>{kP=[{name:"password",label:"Password",type:"password",required:!0}],O1=[{name:"name",label:"Event Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea",required:!0},{name:"max_attendees",label:"Max Attendees",type:"number",required:!0,min:1},{name:"max_quantity",label:"Max Tickets Per Purchase",type:"number",required:!0,min:1,hint:"Maximum tickets a customer can buy in one transaction"},{name:"unit_price",label:"Ticket Price (in pence/cents, leave empty for free)",type:"number",min:0,placeholder:"e.g. 1000 for 10.00",validate:f9},{name:"thank_you_url",label:"Thank You URL",type:"url",required:!0,placeholder:"https://example.com/thank-you",validate:wf},{name:"webhook_url",label:"Webhook URL (optional)",type:"url",placeholder:"https://example.com/webhook",hint:"Receives POST with attendee name and email on registration",validate:wf}],oP=[{name:"name",label:"Your Name",type:"text",required:!0},{name:"email",label:"Your Email",type:"email",required:!0,validate:G9}],yP=[{name:"admin_password",label:"Admin Password *",type:"password",required:!0,hint:"Minimum 8 characters"},{name:"admin_password_confirm",label:"Confirm Admin Password *",type:"password",required:!0},{name:"stripe_secret_key",label:"Stripe Secret Key (optional)",type:"password",placeholder:"sk_live_... or sk_test_...",hint:"Leave empty to disable payments"},{name:"currency_code",label:"Currency Code",type:"text",pattern:"[A-Z]{3}",hint:"3-letter ISO code (e.g., GBP, USD, EUR)"}],pP=[{name:"current_password",label:"Current Password",type:"password",required:!0},{name:"new_password",label:"New Password",type:"password",required:!0,hint:"Minimum 8 characters"},{name:"new_password_confirm",label:"Confirm New Password",type:"password",required:!0}],jP=[{name:"stripe_secret_key",label:"New Stripe Secret Key",type:"password",required:!0,placeholder:"sk_live_... or sk_test_...",hint:"Enter a new key to replace the existing one"}]});var uf=()=>String(O(u,{title:"Ticket Reservation System",children:O("header",{children:[O("h1",{children:"Ticket Reservation System"},void 0,!1,void 0,this),O("p",{children:"Welcome to the ticket reservation system."},void 0,!1,void 0,this),O("nav",{children:O("a",{href:"/admin/",children:O("b",{children:"Admin Login"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)),O9=(h)=>Array.from({length:h},(P,T)=>T+1).map((P)=>`<option value="${P}">${P}</option>`).join(""),Om=(h,P,T)=>{let m=h.max_attendees-h.attendee_count,_=m<=0,G=Math.min(h.max_quantity,m),l=G>1;return String(O(u,{title:`Reserve Ticket: ${h.name}`,children:[O("header",{children:[O("h1",{children:h.name},void 0,!1,void 0,this),O("p",{children:h.description},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("section",{children:O("aside",{children:O("p",{children:[O("strong",{children:"Spots remaining:"},void 0,!1,void 0,this)," ",m]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),O(I,{html:Rh(T)},void 0,!1,void 0,this),_?O("section",{children:O("div",{class:"error",children:"Sorry, this event is full."},void 0,!1,void 0,this)},void 0,!1,void 0,this):O("section",{children:O("form",{method:"POST",action:`/ticket/${h.id}`,children:[O("header",{children:O("h2",{children:"Reserve Your Ticket"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("input",{type:"hidden",name:"csrf_token",value:P},void 0,!1,void 0,this),O(I,{html:r(oP)},void 0,!1,void 0,this),l?O(k1,{children:[O("label",{for:"quantity",children:"Number of Tickets"},void 0,!1,void 0,this),O("select",{name:"quantity",id:"quantity",children:O(I,{html:O9(G)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this):O("input",{type:"hidden",name:"quantity",value:"1"},void 0,!1,void 0,this),O("button",{type:"submit",children:["Reserve Ticket",l?"s":""]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this))},Cf=()=>String(O(u,{title:"Not Found",children:O("header",{children:[O("h1",{children:"Event Not Found"},void 0,!1,void 0,this),O("p",{children:"The event you're looking for doesn't exist."},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this));var lm=v(()=>{hh();e();Ph();Xh();g()});var xf=(h,P)=>{if(P?.requestIP){let T=P.requestIP(h);if(T?.address)return T.address}return"direct"},l1=(h)=>{let P=h.headers.get("cookie");if(!P)return new Map;return a(n((m)=>{let[_,G]=m.trim().split("=");return _&&G?[_,G]:null}),i_,t((m,[_,G])=>{return m.set(_,G),m},new Map))(P.split(";"))},vm=async(h)=>{let T=l1(h).get("__Host-session");if(!T)return null;let m=await Pf(T);if(!m)return null;if(m.expires<Date.now())return await xP(T),null;return{token:T,csrfToken:m.csrf_token}},gf=async(h)=>{return await vm(h)!==null},nP=(h,P)=>{return b_(h,P)},$=(h,P=200)=>new Response(h,{status:P,headers:{"content-type":"text/html; charset=utf-8"}}),Mh=()=>$(Cf(),404),Lh=(h,P=400)=>$(Rf(h),P),C=(h,P)=>{let T={location:h};if(P)T["set-cookie"]=P;return new Response(null,{status:302,headers:T})},v1=async(h)=>{let P=await h.text();return new URLSearchParams(P)},qf=(h)=>{let P=new URL(h.url);return`${P.protocol}//${P.host}`},l9=(h)=>h!=="/"&&h.endsWith("/")?h.slice(0,-1):h,zm=(h)=>{let P=new URL(h.url);return{url:P,path:l9(P.pathname),method:h.method}},Zm=(h,P)=>{return new URL(h.url).searchParams.get(P)},v9=(h,P)=>{let T=new Headers(h.headers);return T.set("set-cookie",P),new Response(h.body,{status:h.status,headers:T})},tP=(h)=>(P,T=200)=>v9($(P,T),h),z9=async(h)=>{let P=await Ih(h);return P?q_(P):E_(Mh())},z1=async(h,P)=>{let T=await z9(h);return T.ok?P(T.value):T.response},o1=async(h,P,T)=>{let m=await vm(h);return m?P(m):T()},wh=async(h,P)=>o1(h,P,()=>C("/admin")),Ef="csrf_token",Vf=(h,P)=>`${Ef}=${h}; HttpOnly; Secure; SameSite=Strict; Path=${P}; Max-Age=3600`,bf=async(h,P)=>{let m=l1(h).get(Ef)||"",_=await v1(h),G=_.get("csrf_token")||"";if(!m||!G||!nP(m,G)){let l=fh();return{ok:!1,response:P(l)}}return{ok:!0,form:_}},Z1=async(h)=>{let P=await vm(h);if(!P)return{ok:!1,response:C("/admin")};let T=await v1(h),m=T.get("csrf_token")||"";if(!nP(P.csrfToken,m))return{ok:!1,response:$("Invalid CSRF token",403)};return{ok:!0,session:P,form:T}},Q1=async(h,P)=>{let T=await Z1(h);return T.ok?P(T.session,T.form):T.response};var Th=v(()=>{g1();ph();i1();Gm();lm()});var Z9,Df=async(h)=>{let P=await kh(h.name),T=await kh(h.email),m=h.stripe_payment_id?await kh(h.stripe_payment_id):null;return{...h,name:P,email:T,stripe_payment_id:m}},kf=async(h)=>{let T=(await H().execute({sql:"SELECT * FROM attendees WHERE event_id = ? ORDER BY created DESC",args:[h]})).rows;return Promise.all(n(Df)(T))},of=async(h,P,T,m=null,_=1)=>{let G=new Date().toISOString(),l=await Zh(P),z=await Zh(T),X=m?await Zh(m):null,L=await H().execute({sql:"INSERT INTO attendees (event_id, name, email, created, stripe_payment_id, quantity) VALUES (?, ?, ?, ?, ?, ?)",args:[h,l,z,G,X,_]});return{id:Number(L.lastInsertRowid),event_id:h,name:P,email:T,created:G,stripe_payment_id:m,quantity:_}},rP=async(h)=>{let P=await Qh("SELECT * FROM attendees WHERE id = ?",[h]);return P?Df(P):null},yf=async(h,P)=>{let T=await Zh(P);await H().execute({sql:"UPDATE attendees SET stripe_payment_id = ? WHERE id = ?",args:[T,h]})},J1=(h)=>Z9.deleteById(h),pf=async(h,P=1)=>{let T=await Ih(h);if(!T)return!1;return T.attendee_count+P<=T.max_attendees};var y1=v(()=>{g1();Hh();ph();_m();Z9=bP({name:"attendees",primaryKey:"id",schema:{id:s.generated()}})});var Qm=(h,P,T,m)=>String(O(u,{title:`Delete Attendee: ${P.name}`,children:[O("header",{children:[O("h1",{children:"Delete Attendee"},void 0,!1,void 0,this),O("nav",{children:O("a",{href:`/admin/event/${h.id}`,children:"← Back to Event"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("section",{children:[m&&O("div",{class:"error",children:m},void 0,!1,void 0,this),O("article",{children:O("aside",{children:O("p",{children:[O("strong",{children:"Warning:"},void 0,!1,void 0,this)," This will permanently remove this attendee from the event."]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("article",{children:[O("h2",{children:"Attendee Details"},void 0,!1,void 0,this),O("p",{children:[O("strong",{children:"Name:"},void 0,!1,void 0,this)," ",P.name]},void 0,!0,void 0,this),O("p",{children:[O("strong",{children:"Email:"},void 0,!1,void 0,this)," ",P.email]},void 0,!0,void 0,this),O("p",{children:[O("strong",{children:"Quantity:"},void 0,!1,void 0,this)," ",P.quantity]},void 0,!0,void 0,this),O("p",{children:[O("strong",{children:"Registered:"},void 0,!1,void 0,this)," ",new Date(P.created).toLocaleString()]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),O("p",{children:['To delete this attendee, you must type their name "',P.name,'" into the box below:']},void 0,!0,void 0,this),O("form",{method:"POST",action:`/admin/event/${h.id}/attendee/${P.id}/delete`,children:[O("input",{type:"hidden",name:"csrf_token",value:T},void 0,!1,void 0,this),O("label",{for:"confirm_name",children:"Attendee name"},void 0,!1,void 0,this),O("input",{type:"text",id:"confirm_name",name:"confirm_name",placeholder:P.name,autocomplete:"off",required:!0},void 0,!1,void 0,this),O("button",{type:"submit",class:"danger",children:"Delete Attendee"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this));var jf=v(()=>{Xh();g()});var Q9=async(h,P)=>{let T=await Ih(h);if(!T)return null;let m=await rP(P);if(!m||m.event_id!==h)return null;return{attendee:m,event:T}},tf=(h,P)=>async(T)=>{let m=await Q9(h,P);return m?T(m):Mh()},J9=async(h,P,T)=>wh(h,(m)=>tf(P,T)((_)=>$(Qm(_.event,_.attendee,m.csrfToken)))),X9=(h,P)=>h.trim().toLowerCase()===P.trim().toLowerCase(),M9=async(h,P,T)=>Q1(h,(m,_)=>tf(P,T)(async(G)=>{let l=_.get("confirm_name")??"";if(!X9(G.attendee.name,l))return $(Qm(G.event,G.attendee,m.csrfToken,"Attendee name does not match. Please type the exact name to confirm deletion."),400);return await J1(T),C(`/admin/event/${P}`)})),rf=(h)=>({eventId:Number.parseInt(h.eventId??"0",10),attendeeId:Number.parseInt(h.attendeeId??"0",10)}),nf=(h,P)=>{let T=rf(P);return M9(h,T.eventId,T.attendeeId)},af;var sf=v(()=>{y1();ph();Th();jf();af=b({"GET /admin/event/:eventId/attendee/:attendeeId/delete":(h,P)=>{let T=rf(P);return J9(h,T.eventId,T.attendeeId)},"POST /admin/event/:eventId/attendee/:attendeeId/delete":nf,"DELETE /admin/event/:eventId/attendee/:attendeeId/delete":nf})});var L9=5,c9=900000,ef=async(h)=>Qh("SELECT attempts, locked_until FROM login_attempts WHERE ip = ?",[h]),h0=async(h)=>{let P=await ef(h);if(!P)return!1;if(P.locked_until&&P.locked_until>Date.now())return!0;if(P.locked_until&&P.locked_until<=Date.now())return await oh("login_attempts","ip",h),!1;return!1},P0=async(h)=>{let T=((await ef(h))?.attempts??0)+1;if(T>=L9){let m=Date.now()+c9;return await H().execute({sql:"INSERT OR REPLACE INTO login_attempts (ip, attempts, locked_until) VALUES (?, ?, ?)",args:[h,T,m]}),!0}return await H().execute({sql:"INSERT OR REPLACE INTO login_attempts (ip, attempts, locked_until) VALUES (?, ?, NULL)",args:[h,T]}),!1},T0=async(h)=>oh("login_attempts","ip",h);var m0=v(()=>{Hh()});var Y9,F9=({e:h})=>String(O("tr",{children:[O("td",{children:h.name},void 0,!1,void 0,this),O("td",{children:[h.attendee_count," / ",h.max_attendees]},void 0,!0,void 0,this),O("td",{children:new Date(h.created).toLocaleDateString()},void 0,!1,void 0,this),O("td",{children:O("a",{href:`/admin/event/${h.id}`,children:"View"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)),_0=(h,P)=>{let T=h.length>0?a(n((m)=>F9({e:m})),Y9)(h):'<tr><td colspan="4">No events yet</td></tr>';return String(O(u,{title:"Admin Dashboard",children:[O("header",{children:[O("h1",{children:"Admin Dashboard"},void 0,!1,void 0,this),O("nav",{children:O("ul",{children:[O("li",{children:O("a",{href:"/admin/settings",children:"Settings"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("li",{children:O("a",{href:"/admin/sessions",children:"Sessions"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("li",{children:O("a",{href:"/admin/logout",children:"Logout"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("section",{children:[O("header",{children:O("h2",{children:"Events"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("table",{children:[O("thead",{children:O("tr",{children:[O("th",{children:"Name"},void 0,!1,void 0,this),O("th",{children:"Attendees"},void 0,!1,void 0,this),O("th",{children:"Created"},void 0,!1,void 0,this),O("th",{children:"Actions"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),O("tbody",{children:O(I,{html:T},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),O("br",{},void 0,!1,void 0,this),O("section",{children:O("form",{method:"POST",action:"/admin/event",children:[O("header",{children:O("h2",{children:"Create New Event"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("input",{type:"hidden",name:"csrf_token",value:P},void 0,!1,void 0,this),O(I,{html:r(O1)},void 0,!1,void 0,this),O("button",{type:"submit",children:"Create Event"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this))};var f0=v(()=>{hh();e();Ph();Xh();g();Y9=t((h,P)=>h+P,"")});var G0=(h)=>String(O(u,{title:"Admin Login",children:[O("header",{children:O("h1",{children:"Admin Login"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("section",{children:[O(I,{html:Rh(h)},void 0,!1,void 0,this),O("form",{method:"POST",action:"/admin/login",children:[O(I,{html:r(kP)},void 0,!1,void 0,this),O("button",{type:"submit",children:"Login"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this));var O0=v(()=>{hh();e();Ph();Xh();g()});var p1=(h,P=200)=>$(G0(h),P),d9=(h)=>o1(h,async(P)=>$(_0(await Nf(),P.csrfToken)),()=>p1()),l0;var Jm=v(()=>{ph();Th();f0();O0();l0=b({"GET /admin":(h)=>d9(h)})});var j1="__Host-session=; HttpOnly; Secure; SameSite=Strict; Path=/; Max-Age=0";var U9=async(h,P)=>{let T=xf(h,P);if(await h0(T))return p1("Too many login attempts. Please try again later.",429);let m=await v1(h),_=Oh(m,kP);if(!_.valid)return p1(_.error,400);if(!await iP(_.values.password))return await P0(T),p1("Invalid credentials",401);await T0(T);let l=fh(),z=fh(),X=Date.now()+86400000;return await hf(l,z,X),C("/admin",`__Host-session=${l}; HttpOnly; Secure; SameSite=Strict; Path=/; Max-Age=86400`)},W9=(h)=>o1(h,async(P)=>{return await xP(P.token),C("/admin",j1)},()=>C("/admin",j1)),v0;var z0=v(()=>{m0();i1();V1();hh();Jm();Th();Ph();v0=b({"POST /admin/login":(h,P,T)=>U9(h,T),"GET /admin/logout":(h)=>W9(h)})});var Z0=(h)=>async(P,T)=>{let m=await Z1(P);return m.ok?h(P,T,m):m.response},B9=(h,P,T)=>h.ok?T.onSuccess(h.row,P.session):T.onError(h.error,P.session,P.form),S9=(h,P,T)=>h.ok||!("notFound"in h)?T.onSuccess(P):T.onNotFound(),N9=(h,P,T,m)=>{if(P.ok)return m.onSuccess(P.row,T.session);if("notFound"in P)return m.onNotFound();return m.onError(h,P.error,T.session,T.form)},Q0=(h,P)=>async(T)=>{let m=await Z1(T);return m.ok?B9(await h.create(m.form),m,P):m.response},J0=(h,P)=>Z0(async(T,m,_)=>N9(m,await h.update(m,_.form),_,P)),K9=(h)=>new URL(h.url).searchParams.get("verify_name")!=="false",A9=(h,P,T,m,_,G)=>{if(!K9(h)||!P.verifyName||!G)return null;let l=_.form.get("confirm_name")??"";return P.verifyName(m,l)?null:G(T,m,_.session,_.form)},X0=(h,P)=>Z0(async(T,m,_)=>{let G=await h.table.findById(m);if(!G)return P.onNotFound();let l=A9(T,h,m,G,_,P.onVerifyFailed);if(l)return l;return S9(await h.delete(m),_.session,P)});var M0=v(()=>{Th()});var L0=(h,P,T)=>{let m=Oh(h,P);return m.valid?{ok:!0,input:T(m.values)}:{ok:!1,error:m.error}},c0=async(h,P)=>{return await h.findById(P)?null:{ok:!1,notFound:!0}},Y0=(h)=>{let{table:P,fields:T,toInput:m,nameField:_}=h,G=(J)=>L0(J,T,m),l=(J)=>L0(J,T.filter((Q)=>J.has(Q.name)),(Q)=>m(Q)),z=async(J)=>{let Q=G(J);if(!Q.ok)return Q;return{ok:!0,row:await P.insert(Q.input)}},X=async(J,Q)=>{let F=await c0(P,J);if(F)return F;let Y=G(Q);if(!Y.ok)return Y;let U=await P.update(J,Y.input);return U?{ok:!0,row:U}:{ok:!1,notFound:!0}},L=async(J)=>{let Q=await c0(P,J);if(Q)return Q;if(h.onDelete)await h.onDelete(J);else await P.deleteById(J);return{ok:!0}},Z=_?(J,Q)=>{return String(J[_]??"").trim().toLowerCase()===Q.trim().toLowerCase()}:void 0;return{table:P,fields:T,parseInput:G,parsePartialInput:l,create:z,update:X,delete:L,...Z&&{verifyName:Z}}};var F0=v(()=>{hh()});var $9,H9=({a:h,eventId:P})=>String(O("tr",{children:[O("td",{children:h.name},void 0,!1,void 0,this),O("td",{children:h.email},void 0,!1,void 0,this),O("td",{children:h.quantity},void 0,!1,void 0,this),O("td",{children:new Date(h.created).toLocaleString()},void 0,!1,void 0,this),O("td",{children:O("a",{href:`/admin/event/${P}/attendee/${h.id}/delete`,class:"danger",children:"Delete"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)),d0=(h,P)=>{let T=P.length>0?a(n((m)=>H9({a:m,eventId:h.id})),$9)(P):'<tr><td colspan="5">No attendees yet</td></tr>';return String(O(u,{title:`Event: ${h.name}`,children:[O("header",{children:[O("h1",{children:h.name},void 0,!1,void 0,this),O("nav",{children:O("ul",{children:[O("li",{children:O("a",{href:"/admin/",children:"← Back to Dashboard"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("li",{children:O("a",{href:`/admin/event/${h.id}/edit`,children:"Edit Event"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("li",{children:O("a",{href:`/admin/event/${h.id}/delete`,class:"danger",children:"Delete Event"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("section",{children:O("article",{children:[O("h2",{children:"Event Details"},void 0,!1,void 0,this),O("p",{children:[O("strong",{children:"Description:"},void 0,!1,void 0,this)," ",h.description]},void 0,!0,void 0,this),O("p",{children:[O("strong",{children:"Max Attendees:"},void 0,!1,void 0,this)," ",h.max_attendees]},void 0,!0,void 0,this),O("p",{children:[O("strong",{children:"Max Tickets Per Purchase:"},void 0,!1,void 0,this)," ",h.max_quantity]},void 0,!0,void 0,this),O("p",{children:[O("strong",{children:"Tickets Sold:"},void 0,!1,void 0,this)," ",h.attendee_count]},void 0,!0,void 0,this),O("p",{children:[O("strong",{children:"Spots Remaining:"},void 0,!1,void 0,this)," ",h.max_attendees-h.attendee_count]},void 0,!0,void 0,this),O("p",{children:[O("strong",{children:"Thank You URL:"},void 0,!1,void 0,this)," ",O("a",{href:h.thank_you_url,children:h.thank_you_url},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("p",{children:[O("strong",{children:"Ticket URL:"},void 0,!1,void 0,this)," ",O("a",{href:`/ticket/${h.id}`,children:["/ticket/",h.id]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),h.webhook_url&&O("p",{children:[O("strong",{children:"Webhook URL:"},void 0,!1,void 0,this)," ",O("a",{href:h.webhook_url,children:h.webhook_url},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),O("section",{children:[O("header",{children:[O("h2",{children:"Attendees"},void 0,!1,void 0,this),O("nav",{children:O("a",{href:`/admin/event/${h.id}/export`,children:O("i",{children:"Export CSV"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("table",{children:[O("thead",{children:O("tr",{children:[O("th",{children:"Name"},void 0,!1,void 0,this),O("th",{children:"Email"},void 0,!1,void 0,this),O("th",{children:"Qty"},void 0,!1,void 0,this),O("th",{children:"Registered"},void 0,!1,void 0,this),O("th",{children:"Actions"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),O("tbody",{children:O(I,{html:T},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this))},I9=(h)=>({name:h.name,description:h.description,max_attendees:h.max_attendees,max_quantity:h.max_quantity,unit_price:h.unit_price,thank_you_url:h.thank_you_url,webhook_url:h.webhook_url}),Xm=(h,P,T)=>String(O(u,{title:`Edit: ${h.name}`,children:[O("header",{children:[O("h1",{children:"Edit Event"},void 0,!1,void 0,this),O("nav",{children:O("a",{href:`/admin/event/${h.id}`,children:"← Back to Event"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("section",{children:[O(I,{html:Rh(T)},void 0,!1,void 0,this),O("form",{method:"POST",action:`/admin/event/${h.id}/edit`,children:[O("input",{type:"hidden",name:"csrf_token",value:P},void 0,!1,void 0,this),O(I,{html:r(O1,I9(h))},void 0,!1,void 0,this),O("button",{type:"submit",children:"Save Changes"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)),Mm=(h,P,T)=>String(O(u,{title:`Delete: ${h.name}`,children:[O("header",{children:[O("h1",{children:"Delete Event"},void 0,!1,void 0,this),O("nav",{children:O("a",{href:`/admin/event/${h.id}`,children:"← Back to Event"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("section",{children:[T&&O("div",{class:"error",children:T},void 0,!1,void 0,this),O("article",{children:O("aside",{children:O("p",{children:[O("strong",{children:"Warning:"},void 0,!1,void 0,this)," This will permanently delete the event and all ",h.attendee_count," attendee(s)."]},void 0,!0,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("p",{children:['To delete this event, you must type its name "',h.name,'" into the box below:']},void 0,!0,void 0,this),O("form",{method:"POST",action:`/admin/event/${h.id}/delete`,children:[O("input",{type:"hidden",name:"csrf_token",value:P},void 0,!1,void 0,this),O("label",{for:"confirm_name",children:"Event name"},void 0,!1,void 0,this),O("input",{type:"text",id:"confirm_name",name:"confirm_name",placeholder:h.name,autocomplete:"off",required:!0},void 0,!1,void 0,this),O("button",{type:"submit",class:"danger",children:"Delete Event"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this));var U0=v(()=>{hh();e();Ph();Xh();g();$9=t((h,P)=>h+P,"")});var Lm=(h)=>{if(/[",\n\r]/.test(h))return`"${h.replace(/"/g,'""')}"`;return h},W0=(h)=>{return a(n((m)=>[Lm(m.name),Lm(m.email),String(m.quantity),Lm(new Date(m.created).toISOString())].join(",")),t((m,_)=>`${m}
${_}`,"Name,Email,Quantity,Registered"))(h)};var B0=()=>{};var R9=(h)=>({name:h.name,description:h.description,maxAttendees:h.max_attendees,thankYouUrl:h.thank_you_url,unitPrice:h.unit_price,maxQuantity:h.max_quantity,webhookUrl:h.webhook_url||null}),cm,N0=async(h,P,T)=>{if(!await gf(h))return C("/admin");return z1(P,async(m)=>T(m,await kf(P)))},w9,u9=(h,P)=>N0(h,P,(T,m)=>$(d0(T,m))),K0=(h)=>(P,T)=>wh(P,(m)=>z1(T,(_)=>$(h(_,m.csrfToken)))),A0=async(h,P,T,m)=>{let _=await Ih(h);return _?$(P(_,T,m),400):Mh()},C9,x9,g9=(h,P)=>N0(h,P,(T,m)=>{let _=W0(m),G=`${T.name.replace(/[^a-zA-Z0-9]/g,"_")}_attendees.csv`;return new Response(_,{headers:{"content-type":"text/csv; charset=utf-8","content-disposition":`attachment; filename="${G}"`}})}),i9,S0,jh=(h)=>Number.parseInt(h.id??"0",10),$0;var H0=v(()=>{y1();ph();M0();F0();Th();U0();B0();Ph();cm=Y0({table:DP,fields:O1,toInput:R9,nameField:"name",onDelete:(h)=>Sf(h)}),w9=Q0(cm,{onSuccess:()=>C("/admin"),onError:()=>C("/admin")}),C9=K0(Xm),x9=J0(cm,{onSuccess:(h)=>C(`/admin/event/${h.id}`),onError:(h,P,T)=>A0(h,Xm,T.csrfToken,P),onNotFound:Mh}),i9=K0(Mm),S0=X0(cm,{onSuccess:()=>C("/admin"),onVerifyFailed:(h,P,T)=>A0(h,Mm,T.csrfToken,"Event name does not match. Please type the exact name to confirm deletion."),onNotFound:Mh}),$0=b({"POST /admin/event":(h)=>w9(h),"GET /admin/event/:id":(h,P)=>u9(h,jh(P)),"GET /admin/event/:id/edit":(h,P)=>C9(h,jh(P)),"POST /admin/event/:id/edit":(h,P)=>x9(h,jh(P)),"GET /admin/event/:id/export":(h,P)=>g9(h,jh(P)),"GET /admin/event/:id/delete":(h,P)=>i9(h,jh(P)),"POST /admin/event/:id/delete":(h,P)=>S0(h,jh(P)),"DELETE /admin/event/:id/delete":(h,P)=>S0(h,jh(P))})});var q9,E9=({session:h,isCurrent:P})=>String(O("tr",{children:[O("td",{children:[h.token.slice(0,8),"..."]},void 0,!0,void 0,this),O("td",{children:new Date(h.expires).toLocaleString()},void 0,!1,void 0,this),O("td",{children:P?O("mark",{children:"Current"},void 0,!1,void 0,this):""},void 0,!1,void 0,this)]},void 0,!0,void 0,this)),Ym=(h,P,T,m)=>{let _=h.length>0?a(n((l)=>E9({session:l,isCurrent:l.token===P})),q9)(h):'<tr><td colspan="3">No sessions</td></tr>',G=h.filter((l)=>l.token!==P).length;return String(O(u,{title:"Admin Sessions",children:[O("header",{children:[O("h1",{children:"Sessions"},void 0,!1,void 0,this),O("nav",{children:O("a",{href:"/admin/",children:"← Back to Dashboard"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),m&&O("div",{class:"success",children:m},void 0,!1,void 0,this),O("section",{children:O("table",{children:[O("thead",{children:O("tr",{children:[O("th",{children:"Token"},void 0,!1,void 0,this),O("th",{children:"Expires"},void 0,!1,void 0,this),O("th",{children:"Status"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),O("tbody",{children:O(I,{html:_},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),G>0&&O(k1,{children:[O("br",{},void 0,!1,void 0,this),O("section",{children:O("form",{method:"POST",action:"/admin/sessions",children:[O("input",{type:"hidden",name:"csrf_token",value:T},void 0,!1,void 0,this),O("button",{type:"submit",class:"danger",children:["Log out of all other sessions (",G,")"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this))};var I0=v(()=>{e();Xh();g();q9=t((h,P)=>h+P,"")});var V9=(h)=>wh(h,async(P)=>{let T=await Tm();return $(Ym(T,P.token,P.csrfToken))}),b9=(h)=>Q1(h,async(P)=>{await mf(P.token);let T=await Tm();return $(Ym(T,P.token,P.csrfToken,"Logged out of all other sessions"))}),R0;var w0=v(()=>{i1();Th();I0();R0=b({"GET /admin/sessions":(h)=>V9(h),"POST /admin/sessions":(h)=>b9(h)})});var n1=(h,P,T,m)=>String(O(u,{title:"Admin Settings",children:[O("header",{children:[O("h1",{children:"Admin Settings"},void 0,!1,void 0,this),O("nav",{children:O("a",{href:"/admin/",children:"← Back to Dashboard"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this),T&&O("div",{class:"error",children:T},void 0,!1,void 0,this),m&&O("div",{class:"success",children:m},void 0,!1,void 0,this),O("section",{children:O("form",{method:"POST",action:"/admin/settings/stripe",children:[O("header",{children:O("h2",{children:"Stripe Settings"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("p",{children:P?"A Stripe secret key is currently configured. Enter a new key below to replace it.":"No Stripe key is configured. Payments are disabled."},void 0,!1,void 0,this),O("input",{type:"hidden",name:"csrf_token",value:h},void 0,!1,void 0,this),O(I,{html:r(jP)},void 0,!1,void 0,this),O("button",{type:"submit",children:"Update Stripe Key"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),O("br",{},void 0,!1,void 0,this),O("section",{children:O("form",{method:"POST",action:"/admin/settings",children:[O("header",{children:O("h2",{children:"Change Password"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("p",{children:"Changing your password will log you out of all sessions."},void 0,!1,void 0,this),O("input",{type:"hidden",name:"csrf_token",value:h},void 0,!1,void 0,this),O(I,{html:r(pP)},void 0,!1,void 0,this),O("button",{type:"submit",children:"Change Password"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this));var u0=v(()=>{hh();e();Ph();Xh();g()});var D9=async(h,P,T)=>{let m=await Z1(h);if(!m.ok)return m;let _=Oh(m.form,P);if(!_.valid)return{ok:!1,response:T?await T(m.session,m.form,_.error):C("/admin")};return{ok:!0,session:m.session,validation:_}},k9=(h)=>wh(h,async(P)=>$(n1(P.csrfToken,await E1()))),o9=(h)=>{let P=Oh(h,pP);if(!P.valid)return P;let{values:T}=P,m=T.current_password,_=T.new_password,G=T.new_password_confirm;if(_.length<8)return{valid:!1,error:"New password must be at least 8 characters"};if(_!==G)return{valid:!1,error:"New passwords do not match"};return{valid:!0,currentPassword:m,newPassword:_}},y9=(h)=>Q1(h,async(P,T)=>{let m=await E1(),_=(z,X)=>$(n1(P.csrfToken,m,z),X),G=o9(T);if(!G.valid)return _(G.error,400);if(!await iP(G.currentPassword))return _("Current password is incorrect",401);return await lf(G.newPassword),C("/admin",j1)}),p9=async(h)=>{let T=await D9(h,jP,async(_,G,l)=>{let z=await E1();return $(n1(_.csrfToken,z,l),400)});if(!T.ok)return T.response;await Gf(T.validation.values.stripe_secret_key);let m=await E1();return $(n1(T.session.csrfToken,m,void 0,"Stripe key updated successfully"))},C0;var x0=v(()=>{V1();hh();Th();u0();Ph();C0=b({"GET /admin/settings":(h)=>k9(h),"POST /admin/settings":(h)=>y9(h),"POST /admin/settings/stripe":(h)=>p9(h)})});var g0={};Dh(g0,{routeAdmin:()=>n9});var j9,n9;var i0=v(()=>{sf();z0();Jm();H0();w0();x0();j9={...l0,...v0,...C0,...R0,...$0,...af},n9=Jh(j9)});class j{getClientName(){throw Error("getClientName not implemented.")}makeRequest(h,P,T,m,_,G,l,z){throw Error("makeRequest not implemented.")}static makeTimeoutError(){let h=TypeError(j.TIMEOUT_ERROR_CODE);return h.code=j.TIMEOUT_ERROR_CODE,h}}class t1{constructor(h,P){this._statusCode=h,this._headers=P}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw Error("getRawResponse not implemented.")}toStream(h){throw Error("toStream not implemented.")}toJSON(){throw Error("toJSON not implemented.")}}var aP=v(()=>{j.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];j.TIMEOUT_ERROR_CODE="ETIMEDOUT"});var r1,Fm;var q0=v(()=>{aP();r1=class r1 extends j{constructor(h){super();if(!h){if(!globalThis.fetch)throw Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");h=globalThis.fetch}if(globalThis.AbortController)this._fetchFn=r1.makeFetchWithAbortTimeout(h);else this._fetchFn=r1.makeFetchWithRaceTimeout(h)}static makeFetchWithRaceTimeout(h){return(P,T,m)=>{let _,G=new Promise((z,X)=>{_=setTimeout(()=>{_=null,X(j.makeTimeoutError())},m)}),l=h(P,T);return Promise.race([l,G]).finally(()=>{if(_)clearTimeout(_)})}}static makeFetchWithAbortTimeout(h){return async(P,T,m)=>{let _=new AbortController,G=setTimeout(()=>{G=null,_.abort(j.makeTimeoutError())},m);try{return await h(P,Object.assign(Object.assign({},T),{signal:_.signal}))}catch(l){if(l.name==="AbortError")throw j.makeTimeoutError();else throw l}finally{if(G)clearTimeout(G)}}}getClientName(){return"fetch"}async makeRequest(h,P,T,m,_,G,l,z){let L=new URL(T,`${l==="http"?"http":"https"}://${h}`);L.port=P;let Z=m=="POST"||m=="PUT"||m=="PATCH",J=G||(Z?"":void 0),Q=await this._fetchFn(L.toString(),{method:m,headers:_,body:J},z);return new Fm(Q)}};Fm=class Fm extends t1{constructor(h){super(h.status,Fm._transformHeadersToObject(h.headers));this._res=h}getRawResponse(){return this._res}toStream(h){return h(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(h){let P={};for(let T of h){if(!Array.isArray(T)||T.length!=2)throw Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");P[T[0]]=T[1]}return P}}});class a1{computeHMACSignature(h,P){throw Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(h,P){throw Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(h){throw Error("computeSHA256 not implemented.")}}var s1;var sP=v(()=>{s1=class s1 extends Error{}});var Um,dm;var E0=v(()=>{sP();Um=class Um extends a1{constructor(h){super();this.subtleCrypto=h||crypto.subtle}computeHMACSignature(h,P){throw new s1("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(h,P){let T=new TextEncoder,m=await this.subtleCrypto.importKey("raw",T.encode(P),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),_=await this.subtleCrypto.sign("hmac",m,T.encode(h)),G=new Uint8Array(_),l=Array(G.length);for(let z=0;z<G.length;z++)l[z]=dm[G[z]];return l.join("")}async computeSHA256Async(h){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",h))}};dm=Array(256);for(let h=0;h<dm.length;h++)dm[h]=h.toString(16).padStart(2,"0")});class Wm{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(h)=>{let P=Math.random()*16|0;return(h==="x"?P:P&3|8).toString(16)})}secureCompare(h,P){if(h.length!==P.length)return!1;let T=h.length,m=0;for(let _=0;_<T;++_)m|=h.charCodeAt(_)^P.charCodeAt(_);return m===0}createEmitter(){throw Error("createEmitter not implemented.")}tryBufferData(h){throw Error("tryBufferData not implemented.")}createNodeHttpClient(h){throw Error("createNodeHttpClient not implemented.")}createFetchHttpClient(h){return new r1(h)}createDefaultHttpClient(){throw Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(h){return new Um(h)}createDefaultCryptoProvider(){throw Error("createDefaultCryptoProvider not implemented.")}}var V0=v(()=>{q0();E0()});class Bm{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(h,P){let T=(m)=>{P(m.data)};return this.listenerMapping.set(P,T),this.eventTarget.addEventListener(h,T)}removeListener(h,P){let T=this.listenerMapping.get(P);return this.listenerMapping.delete(P),this.eventTarget.removeEventListener(h,T)}once(h,P){let T=(m)=>{P(m.data)};return this.listenerMapping.set(P,T),this.eventTarget.addEventListener(h,T,{once:!0})}emit(h,P){return this.eventTarget.dispatchEvent(new b0(h,P))}}var b0;var D0=v(()=>{b0=class b0 extends Event{constructor(h,P){super(h);this.data=P}}});var Sm;var k0=v(()=>{V0();D0();Sm=class Sm extends Wm{getUname(){return Promise.resolve(null)}createEmitter(){return new Bm}tryBufferData(h){if(h.file.data instanceof ReadableStream)throw Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(h)}createNodeHttpClient(){throw Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}});var TT={};Dh(TT,{generateV2Error:()=>Nm,generateV1Error:()=>e1,TemporarySessionExpiredError:()=>Im,StripeUnknownError:()=>Hm,StripeSignatureVerificationError:()=>ch,StripeRateLimitError:()=>TP,StripePermissionError:()=>hT,StripeInvalidRequestError:()=>eP,StripeInvalidGrantError:()=>$m,StripeIdempotencyError:()=>Am,StripeError:()=>D,StripeConnectionError:()=>PT,StripeCardError:()=>Km,StripeAuthenticationError:()=>PP,StripeAPIError:()=>hP});var e1=(h)=>{switch(h.type){case"card_error":return new Km(h);case"invalid_request_error":return new eP(h);case"api_error":return new hP(h);case"authentication_error":return new PP(h);case"rate_limit_error":return new TP(h);case"idempotency_error":return new Am(h);case"invalid_grant":return new $m(h);default:return new Hm(h)}},Nm=(h)=>{switch(h.type){case"temporary_session_expired":return new Im(h)}switch(h.code){case"invalid_fields":return new eP(h)}return e1(h)},D,Km,eP,hP,PP,hT,TP,PT,ch,Am,$m,Hm,Im;var mT=v(()=>{D=class D extends Error{constructor(h={},P=null){super(h.message);this.type=P||this.constructor.name,this.raw=h,this.rawType=h.type,this.code=h.code,this.doc_url=h.doc_url,this.param=h.param,this.detail=h.detail,this.headers=h.headers,this.requestId=h.requestId,this.statusCode=h.statusCode,this.message=h.message,this.userMessage=h.user_message,this.charge=h.charge,this.decline_code=h.decline_code,this.payment_intent=h.payment_intent,this.payment_method=h.payment_method,this.payment_method_type=h.payment_method_type,this.setup_intent=h.setup_intent,this.source=h.source}};D.generate=e1;Km=class Km extends D{constructor(h={}){super(h,"StripeCardError")}};eP=class eP extends D{constructor(h={}){super(h,"StripeInvalidRequestError")}};hP=class hP extends D{constructor(h={}){super(h,"StripeAPIError")}};PP=class PP extends D{constructor(h={}){super(h,"StripeAuthenticationError")}};hT=class hT extends D{constructor(h={}){super(h,"StripePermissionError")}};TP=class TP extends D{constructor(h={}){super(h,"StripeRateLimitError")}};PT=class PT extends D{constructor(h={}){super(h,"StripeConnectionError")}};ch=class ch extends D{constructor(h,P,T={}){super(T,"StripeSignatureVerificationError");this.header=h,this.payload=P}};Am=class Am extends D{constructor(h={}){super(h,"StripeIdempotencyError")}};$m=class $m extends D{constructor(h={}){super(h,"StripeInvalidGrantError")}};Hm=class Hm extends D{constructor(h={}){super(h,"StripeUnknownError")}};Im=class Im extends D{constructor(h={}){super(h,"TemporarySessionExpiredError")}}});var nh=B((wM,o0)=>{o0.exports=TypeError});var OP=B((uM,zG)=>{var Vm=typeof Map==="function"&&Map.prototype,Rm=Object.getOwnPropertyDescriptor&&Vm?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,fT=Vm&&Rm&&typeof Rm.get==="function"?Rm.get:null,y0=Vm&&Map.prototype.forEach,bm=typeof Set==="function"&&Set.prototype,wm=Object.getOwnPropertyDescriptor&&bm?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,GT=bm&&wm&&typeof wm.get==="function"?wm.get:null,p0=bm&&Set.prototype.forEach,t9=typeof WeakMap==="function"&&WeakMap.prototype,_P=t9?WeakMap.prototype.has:null,r9=typeof WeakSet==="function"&&WeakSet.prototype,fP=r9?WeakSet.prototype.has:null,a9=typeof WeakRef==="function"&&WeakRef.prototype,j0=a9?WeakRef.prototype.deref:null,s9=Boolean.prototype.valueOf,e9=Object.prototype.toString,h3=Function.prototype.toString,P3=String.prototype.match,Dm=String.prototype.slice,uh=String.prototype.replace,T3=String.prototype.toUpperCase,n0=String.prototype.toLowerCase,mG=RegExp.prototype.test,t0=Array.prototype.concat,Yh=Array.prototype.join,m3=Array.prototype.slice,r0=Math.floor,xm=typeof BigInt==="function"?BigInt.prototype.valueOf:null,um=Object.getOwnPropertySymbols,gm=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null,X1=typeof Symbol==="function"&&typeof Symbol.iterator==="object",GP=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===X1?"object":"symbol")?Symbol.toStringTag:null,_G=Object.prototype.propertyIsEnumerable,a0=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(h){return h.__proto__}:null);function s0(h,P){if(h===1/0||h===-1/0||h!==h||h&&h>-1000&&h<1000||mG.call(/e/,P))return P;var T=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof h==="number"){var m=h<0?-r0(-h):r0(h);if(m!==h){var _=String(m),G=Dm.call(P,_.length+1);return uh.call(_,T,"$&_")+"."+uh.call(uh.call(G,/([0-9]{3})/g,"$&_"),/_$/,"")}}return uh.call(P,T,"$&_")}var im=(()=>({})),e0=im.custom,hG=OG(e0)?e0:null,fG={__proto__:null,double:'"',single:"'"},_3={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};zG.exports=function h(P,T,m,_){var G=T||{};if(Ah(G,"quoteStyle")&&!Ah(fG,G.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(Ah(G,"maxStringLength")&&(typeof G.maxStringLength==="number"?G.maxStringLength<0&&G.maxStringLength!==1/0:G.maxStringLength!==null))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=Ah(G,"customInspect")?G.customInspect:!0;if(typeof l!=="boolean"&&l!=="symbol")throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ah(G,"indent")&&G.indent!==null&&G.indent!=="\t"&&!(parseInt(G.indent,10)===G.indent&&G.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ah(G,"numericSeparator")&&typeof G.numericSeparator!=="boolean")throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var z=G.numericSeparator;if(typeof P>"u")return"undefined";if(P===null)return"null";if(typeof P==="boolean")return P?"true":"false";if(typeof P==="string")return vG(P,G);if(typeof P==="number"){if(P===0)return 1/0/P>0?"0":"-0";var X=String(P);return z?s0(P,X):X}if(typeof P==="bigint"){var L=String(P)+"n";return z?s0(P,L):L}var Z=typeof G.depth>"u"?5:G.depth;if(typeof m>"u")m=0;if(m>=Z&&Z>0&&typeof P==="object")return qm(P)?"[Array]":"[Object]";var J=W3(G,m);if(typeof _>"u")_=[];else if(lG(_,P)>=0)return"[Circular]";function Q(mh,$h,Sh){if($h)_=m3.call(_),_.push($h);if(Sh){var u1={depth:G.depth};if(Ah(G,"quoteStyle"))u1.quoteStyle=G.quoteStyle;return h(mh,u1,m+1,_)}return h(mh,G,m+1,_)}if(typeof P==="function"&&!PG(P)){var F=J3(P),Y=_T(P,Q);return"[Function"+(F?": "+F:" (anonymous)")+"]"+(Y.length>0?" { "+Yh.call(Y,", ")+" }":"")}if(OG(P)){var U=X1?uh.call(String(P),/^(Symbol\(.*\))_[^)]*$/,"$1"):gm.call(P);return typeof P==="object"&&!X1?mP(U):U}if(F3(P)){var W="<"+n0.call(String(P.nodeName)),N=P.attributes||[];for(var d=0;d<N.length;d++)W+=" "+N[d].name+"="+GG(f3(N[d].value),"double",G);if(W+=">",P.childNodes&&P.childNodes.length)W+="...";return W+="</"+n0.call(String(P.nodeName))+">",W}if(qm(P)){if(P.length===0)return"[]";var c=_T(P,Q);if(J&&!U3(c))return"["+Em(c,J)+"]";return"[ "+Yh.call(c,", ")+" ]"}if(O3(P)){var S=_T(P,Q);if(!("cause"in Error.prototype)&&"cause"in P&&!_G.call(P,"cause"))return"{ ["+String(P)+"] "+Yh.call(t0.call("[cause]: "+Q(P.cause),S),", ")+" }";if(S.length===0)return"["+String(P)+"]";return"{ ["+String(P)+"] "+Yh.call(S,", ")+" }"}if(typeof P==="object"&&l){if(hG&&typeof P[hG]==="function"&&im)return im(P,{depth:Z-m});else if(l!=="symbol"&&typeof P.inspect==="function")return P.inspect()}if(X3(P)){var A=[];if(y0)y0.call(P,function(mh,$h){A.push(Q($h,P,!0)+" => "+Q(mh,P))});return TG("Map",fT.call(P),A,J)}if(c3(P)){var V=[];if(p0)p0.call(P,function(mh){V.push(Q(mh,P))});return TG("Set",GT.call(P),V,J)}if(M3(P))return Cm("WeakMap");if(Y3(P))return Cm("WeakSet");if(L3(P))return Cm("WeakRef");if(v3(P))return mP(Q(Number(P)));if(Z3(P))return mP(Q(xm.call(P)));if(z3(P))return mP(s9.call(P));if(l3(P))return mP(Q(String(P)));if(typeof window<"u"&&P===window)return"{ [object Window] }";if(typeof globalThis<"u"&&P===globalThis||typeof global<"u"&&P===global)return"{ [object globalThis] }";if(!G3(P)&&!PG(P)){var w=_T(P,Q),p=a0?a0(P)===Object.prototype:P instanceof Object||P.constructor===Object,i=P instanceof Object?"":"null prototype",vh=!p&&GP&&Object(P)===P&&GP in P?Dm.call(Ch(P),8,-1):i?"Object":"",CP=p||typeof P.constructor!=="function"?"":P.constructor.name?P.constructor.name+" ":"",_1=CP+(vh||i?"["+Yh.call(t0.call([],vh||[],i||[]),": ")+"] ":"");if(w.length===0)return _1+"{}";if(J)return _1+"{"+Em(w,J)+"}";return _1+"{ "+Yh.call(w,", ")+" }"}return String(P)};function GG(h,P,T){var m=T.quoteStyle||P,_=fG[m];return _+h+_}function f3(h){return uh.call(String(h),/"/g,"&quot;")}function th(h){return!GP||!(typeof h==="object"&&((GP in h)||typeof h[GP]<"u"))}function qm(h){return Ch(h)==="[object Array]"&&th(h)}function G3(h){return Ch(h)==="[object Date]"&&th(h)}function PG(h){return Ch(h)==="[object RegExp]"&&th(h)}function O3(h){return Ch(h)==="[object Error]"&&th(h)}function l3(h){return Ch(h)==="[object String]"&&th(h)}function v3(h){return Ch(h)==="[object Number]"&&th(h)}function z3(h){return Ch(h)==="[object Boolean]"&&th(h)}function OG(h){if(X1)return h&&typeof h==="object"&&h instanceof Symbol;if(typeof h==="symbol")return!0;if(!h||typeof h!=="object"||!gm)return!1;try{return gm.call(h),!0}catch(P){}return!1}function Z3(h){if(!h||typeof h!=="object"||!xm)return!1;try{return xm.call(h),!0}catch(P){}return!1}var Q3=Object.prototype.hasOwnProperty||function(h){return h in this};function Ah(h,P){return Q3.call(h,P)}function Ch(h){return e9.call(h)}function J3(h){if(h.name)return h.name;var P=P3.call(h3.call(h),/^function\s*([\w$]+)/);if(P)return P[1];return null}function lG(h,P){if(h.indexOf)return h.indexOf(P);for(var T=0,m=h.length;T<m;T++)if(h[T]===P)return T;return-1}function X3(h){if(!fT||!h||typeof h!=="object")return!1;try{fT.call(h);try{GT.call(h)}catch(P){return!0}return h instanceof Map}catch(P){}return!1}function M3(h){if(!_P||!h||typeof h!=="object")return!1;try{_P.call(h,_P);try{fP.call(h,fP)}catch(P){return!0}return h instanceof WeakMap}catch(P){}return!1}function L3(h){if(!j0||!h||typeof h!=="object")return!1;try{return j0.call(h),!0}catch(P){}return!1}function c3(h){if(!GT||!h||typeof h!=="object")return!1;try{GT.call(h);try{fT.call(h)}catch(P){return!0}return h instanceof Set}catch(P){}return!1}function Y3(h){if(!fP||!h||typeof h!=="object")return!1;try{fP.call(h,fP);try{_P.call(h,_P)}catch(P){return!0}return h instanceof WeakSet}catch(P){}return!1}function F3(h){if(!h||typeof h!=="object")return!1;if(typeof HTMLElement<"u"&&h instanceof HTMLElement)return!0;return typeof h.nodeName==="string"&&typeof h.getAttribute==="function"}function vG(h,P){if(h.length>P.maxStringLength){var T=h.length-P.maxStringLength,m="... "+T+" more character"+(T>1?"s":"");return vG(Dm.call(h,0,P.maxStringLength),P)+m}var _=_3[P.quoteStyle||"single"];_.lastIndex=0;var G=uh.call(uh.call(h,_,"\\$1"),/[\x00-\x1f]/g,d3);return GG(G,"single",P)}function d3(h){var P=h.charCodeAt(0),T={8:"b",9:"t",10:"n",12:"f",13:"r"}[P];if(T)return"\\"+T;return"\\x"+(P<16?"0":"")+T3.call(P.toString(16))}function mP(h){return"Object("+h+")"}function Cm(h){return h+" { ? }"}function TG(h,P,T,m){var _=m?Em(T,m):Yh.call(T,", ");return h+" ("+P+") {"+_+"}"}function U3(h){for(var P=0;P<h.length;P++)if(lG(h[P],`
`)>=0)return!1;return!0}function W3(h,P){var T;if(h.indent==="\t")T="\t";else if(typeof h.indent==="number"&&h.indent>0)T=Yh.call(Array(h.indent+1)," ");else return null;return{base:T,prev:Yh.call(Array(P+1),T)}}function Em(h,P){if(h.length===0)return"";var T=`
`+P.prev+P.base;return T+Yh.call(h,","+T)+`
`+P.prev}function _T(h,P){var T=qm(h),m=[];if(T){m.length=h.length;for(var _=0;_<h.length;_++)m[_]=Ah(h,_)?P(h[_],h):""}var G=typeof um==="function"?um(h):[],l;if(X1){l={};for(var z=0;z<G.length;z++)l["$"+G[z]]=G[z]}for(var X in h){if(!Ah(h,X))continue;if(T&&String(Number(X))===X&&X<h.length)continue;if(X1&&l["$"+X]instanceof Symbol)continue;else if(mG.call(/[^\w$]/,X))m.push(P(X,h)+": "+P(h[X],h));else m.push(X+": "+P(h[X],h))}if(typeof um==="function"){for(var L=0;L<G.length;L++)if(_G.call(h,G[L]))m.push("["+P(G[L])+"]: "+P(h[G[L]],h))}return m}});var QG=B((CM,ZG)=>{var B3=OP(),S3=nh(),OT=function(h,P,T){var m=h,_;for(;(_=m.next)!=null;m=_)if(_.key===P){if(m.next=_.next,!T)_.next=h.next,h.next=_;return _}},N3=function(h,P){if(!h)return;var T=OT(h,P);return T&&T.value},K3=function(h,P,T){var m=OT(h,P);if(m)m.value=T;else h.next={key:P,next:h.next,value:T}},A3=function(h,P){if(!h)return!1;return!!OT(h,P)},$3=function(h,P){if(h)return OT(h,P,!0)};ZG.exports=function(){var P,T={assert:function(m){if(!T.has(m))throw new S3("Side channel does not contain "+B3(m))},delete:function(m){var _=P&&P.next,G=$3(P,m);if(G&&_&&_===G)P=void 0;return!!G},get:function(m){return N3(P,m)},has:function(m){return A3(P,m)},set:function(m,_){if(!P)P={next:void 0};K3(P,m,_)}};return T}});var km=B((xM,JG)=>{JG.exports=Object});var MG=B((gM,XG)=>{XG.exports=Error});var cG=B((iM,LG)=>{LG.exports=EvalError});var FG=B((qM,YG)=>{YG.exports=RangeError});var UG=B((EM,dG)=>{dG.exports=ReferenceError});var BG=B((VM,WG)=>{WG.exports=SyntaxError});var NG=B((bM,SG)=>{SG.exports=URIError});var AG=B((DM,KG)=>{KG.exports=Math.abs});var HG=B((kM,$G)=>{$G.exports=Math.floor});var RG=B((oM,IG)=>{IG.exports=Math.max});var uG=B((yM,wG)=>{wG.exports=Math.min});var xG=B((pM,CG)=>{CG.exports=Math.pow});var iG=B((jM,gG)=>{gG.exports=Math.round});var EG=B((nM,qG)=>{qG.exports=Number.isNaN||function(P){return P!==P}});var bG=B((tM,VG)=>{var H3=EG();VG.exports=function(P){if(H3(P)||P===0)return P;return P<0?-1:1}});var kG=B((rM,DG)=>{DG.exports=Object.getOwnPropertyDescriptor});var om=B((aM,oG)=>{var lT=kG();if(lT)try{lT([],"length")}catch(h){lT=null}oG.exports=lT});var pG=B((sM,yG)=>{var vT=Object.defineProperty||!1;if(vT)try{vT({},"a",{value:1})}catch(h){vT=!1}yG.exports=vT});var nG=B((eM,jG)=>{jG.exports=function(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function")return!1;if(typeof Symbol.iterator==="symbol")return!0;var P={},T=Symbol("test"),m=Object(T);if(typeof T==="string")return!1;if(Object.prototype.toString.call(T)!=="[object Symbol]")return!1;if(Object.prototype.toString.call(m)!=="[object Symbol]")return!1;var _=42;P[T]=_;for(var G in P)return!1;if(typeof Object.keys==="function"&&Object.keys(P).length!==0)return!1;if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(P).length!==0)return!1;var l=Object.getOwnPropertySymbols(P);if(l.length!==1||l[0]!==T)return!1;if(!Object.prototype.propertyIsEnumerable.call(P,T))return!1;if(typeof Object.getOwnPropertyDescriptor==="function"){var z=Object.getOwnPropertyDescriptor(P,T);if(z.value!==_||z.enumerable!==!0)return!1}return!0}});var aG=B((hL,rG)=>{var tG=typeof Symbol<"u"&&Symbol,I3=nG();rG.exports=function(){if(typeof tG!=="function")return!1;if(typeof Symbol!=="function")return!1;if(typeof tG("foo")!=="symbol")return!1;if(typeof Symbol("bar")!=="symbol")return!1;return I3()}});var ym=B((PL,sG)=>{sG.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var pm=B((TL,eG)=>{var R3=km();eG.exports=R3.getPrototypeOf||null});var TO=B((mL,PO)=>{var w3="Function.prototype.bind called on incompatible ",u3=Object.prototype.toString,C3=Math.max,x3="[object Function]",hO=function(P,T){var m=[];for(var _=0;_<P.length;_+=1)m[_]=P[_];for(var G=0;G<T.length;G+=1)m[G+P.length]=T[G];return m},g3=function(P,T){var m=[];for(var _=T||0,G=0;_<P.length;_+=1,G+=1)m[G]=P[_];return m},i3=function(h,P){var T="";for(var m=0;m<h.length;m+=1)if(T+=h[m],m+1<h.length)T+=P;return T};PO.exports=function(P){var T=this;if(typeof T!=="function"||u3.apply(T)!==x3)throw TypeError(w3+T);var m=g3(arguments,1),_,G=function(){if(this instanceof _){var Z=T.apply(this,hO(m,arguments));if(Object(Z)===Z)return Z;return this}return T.apply(P,hO(m,arguments))},l=C3(0,T.length-m.length),z=[];for(var X=0;X<l;X++)z[X]="$"+X;if(_=Function("binder","return function ("+i3(z,",")+"){ return binder.apply(this,arguments); }")(G),T.prototype){var L=function(){};L.prototype=T.prototype,_.prototype=new L,L.prototype=null}return _}});var lP=B((_L,mO)=>{var q3=TO();mO.exports=Function.prototype.bind||q3});var zT=B((fL,_O)=>{_O.exports=Function.prototype.call});var jm=B((GL,fO)=>{fO.exports=Function.prototype.apply});var OO=B((OL,GO)=>{GO.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var vO=B((lL,lO)=>{var E3=lP(),V3=jm(),b3=zT(),D3=OO();lO.exports=D3||E3.call(b3,V3)});var nm=B((vL,zO)=>{var k3=lP(),o3=nh(),y3=zT(),p3=vO();zO.exports=function(P){if(P.length<1||typeof P[0]!=="function")throw new o3("a function is required");return p3(k3,y3,P)}});var LO=B((zL,MO)=>{var j3=nm(),ZO=om(),JO;try{JO=[].__proto__===Array.prototype}catch(h){if(!h||typeof h!=="object"||!("code"in h)||h.code!=="ERR_PROTO_ACCESS")throw h}var tm=!!JO&&ZO&&ZO(Object.prototype,"__proto__"),XO=Object,QO=XO.getPrototypeOf;MO.exports=tm&&typeof tm.get==="function"?j3([tm.get]):typeof QO==="function"?function(P){return QO(P==null?P:XO(P))}:!1});var UO=B((ZL,dO)=>{var cO=ym(),YO=pm(),FO=LO();dO.exports=cO?function(P){return cO(P)}:YO?function(P){if(!P||typeof P!=="object"&&typeof P!=="function")throw TypeError("getProto: not an object");return YO(P)}:FO?function(P){return FO(P)}:null});var BO=B((QL,WO)=>{var n3=Function.prototype.call,t3=Object.prototype.hasOwnProperty,r3=lP();WO.exports=r3.call(n3,t3)});var JT=B((JL,$O)=>{var K,a3=km(),s3=MG(),e3=cG(),h7=FG(),P7=UG(),Y1=BG(),c1=nh(),T7=NG(),m7=AG(),_7=HG(),f7=RG(),G7=uG(),O7=xG(),l7=iG(),v7=bG(),KO=Function,rm=function(h){try{return KO('"use strict"; return ('+h+").constructor;")()}catch(P){}},vP=om(),z7=pG(),am=function(){throw new c1},Z7=vP?function(){try{return arguments.callee,am}catch(h){try{return vP(arguments,"callee").get}catch(P){return am}}}():am,M1=aG()(),y=UO(),Q7=pm(),J7=ym(),AO=jm(),zP=zT(),L1={},X7=typeof Uint8Array>"u"||!y?K:y(Uint8Array),rh={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?K:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?K:ArrayBuffer,"%ArrayIteratorPrototype%":M1&&y?y([][Symbol.iterator]()):K,"%AsyncFromSyncIteratorPrototype%":K,"%AsyncFunction%":L1,"%AsyncGenerator%":L1,"%AsyncGeneratorFunction%":L1,"%AsyncIteratorPrototype%":L1,"%Atomics%":typeof Atomics>"u"?K:Atomics,"%BigInt%":typeof BigInt>"u"?K:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?K:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?K:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?K:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s3,"%eval%":eval,"%EvalError%":e3,"%Float16Array%":typeof Float16Array>"u"?K:Float16Array,"%Float32Array%":typeof Float32Array>"u"?K:Float32Array,"%Float64Array%":typeof Float64Array>"u"?K:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?K:FinalizationRegistry,"%Function%":KO,"%GeneratorFunction%":L1,"%Int8Array%":typeof Int8Array>"u"?K:Int8Array,"%Int16Array%":typeof Int16Array>"u"?K:Int16Array,"%Int32Array%":typeof Int32Array>"u"?K:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":M1&&y?y(y([][Symbol.iterator]())):K,"%JSON%":typeof JSON==="object"?JSON:K,"%Map%":typeof Map>"u"?K:Map,"%MapIteratorPrototype%":typeof Map>"u"||!M1||!y?K:y(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":a3,"%Object.getOwnPropertyDescriptor%":vP,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?K:Promise,"%Proxy%":typeof Proxy>"u"?K:Proxy,"%RangeError%":h7,"%ReferenceError%":P7,"%Reflect%":typeof Reflect>"u"?K:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?K:Set,"%SetIteratorPrototype%":typeof Set>"u"||!M1||!y?K:y(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?K:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":M1&&y?y(""[Symbol.iterator]()):K,"%Symbol%":M1?Symbol:K,"%SyntaxError%":Y1,"%ThrowTypeError%":Z7,"%TypedArray%":X7,"%TypeError%":c1,"%Uint8Array%":typeof Uint8Array>"u"?K:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?K:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?K:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?K:Uint32Array,"%URIError%":T7,"%WeakMap%":typeof WeakMap>"u"?K:WeakMap,"%WeakRef%":typeof WeakRef>"u"?K:WeakRef,"%WeakSet%":typeof WeakSet>"u"?K:WeakSet,"%Function.prototype.call%":zP,"%Function.prototype.apply%":AO,"%Object.defineProperty%":z7,"%Object.getPrototypeOf%":Q7,"%Math.abs%":m7,"%Math.floor%":_7,"%Math.max%":f7,"%Math.min%":G7,"%Math.pow%":O7,"%Math.round%":l7,"%Math.sign%":v7,"%Reflect.getPrototypeOf%":J7};if(y)try{null.error}catch(h){sm=y(y(h)),rh["%Error.prototype%"]=sm}var sm,M7=function h(P){var T;if(P==="%AsyncFunction%")T=rm("async function () {}");else if(P==="%GeneratorFunction%")T=rm("function* () {}");else if(P==="%AsyncGeneratorFunction%")T=rm("async function* () {}");else if(P==="%AsyncGenerator%"){var m=h("%AsyncGeneratorFunction%");if(m)T=m.prototype}else if(P==="%AsyncIteratorPrototype%"){var _=h("%AsyncGenerator%");if(_&&y)T=y(_.prototype)}return rh[P]=T,T},SO={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ZP=lP(),ZT=BO(),L7=ZP.call(zP,Array.prototype.concat),c7=ZP.call(AO,Array.prototype.splice),NO=ZP.call(zP,String.prototype.replace),QT=ZP.call(zP,String.prototype.slice),Y7=ZP.call(zP,RegExp.prototype.exec),F7=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,d7=/\\(\\)?/g,U7=function(P){var T=QT(P,0,1),m=QT(P,-1);if(T==="%"&&m!=="%")throw new Y1("invalid intrinsic syntax, expected closing `%`");else if(m==="%"&&T!=="%")throw new Y1("invalid intrinsic syntax, expected opening `%`");var _=[];return NO(P,F7,function(G,l,z,X){_[_.length]=z?NO(X,d7,"$1"):l||G}),_},W7=function(P,T){var m=P,_;if(ZT(SO,m))_=SO[m],m="%"+_[0]+"%";if(ZT(rh,m)){var G=rh[m];if(G===L1)G=M7(m);if(typeof G>"u"&&!T)throw new c1("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:_,name:m,value:G}}throw new Y1("intrinsic "+P+" does not exist!")};$O.exports=function(P,T){if(typeof P!=="string"||P.length===0)throw new c1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof T!=="boolean")throw new c1('"allowMissing" argument must be a boolean');if(Y7(/^%?[^%]*%?$/,P)===null)throw new Y1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var m=U7(P),_=m.length>0?m[0]:"",G=W7("%"+_+"%",T),l=G.name,z=G.value,X=!1,L=G.alias;if(L)_=L[0],c7(m,L7([0,1],L));for(var Z=1,J=!0;Z<m.length;Z+=1){var Q=m[Z],F=QT(Q,0,1),Y=QT(Q,-1);if((F==='"'||F==="'"||F==="`"||(Y==='"'||Y==="'"||Y==="`"))&&F!==Y)throw new Y1("property names with quotes must have matching quotes");if(Q==="constructor"||!J)X=!0;if(_+="."+Q,l="%"+_+"%",ZT(rh,l))z=rh[l];else if(z!=null){if(!(Q in z)){if(!T)throw new c1("base intrinsic for "+P+" exists, but the property is not available.");return}if(vP&&Z+1>=m.length){var U=vP(z,Q);if(J=!!U,J&&"get"in U&&!("originalValue"in U.get))z=U.get;else z=z[Q]}else J=ZT(z,Q),z=z[Q];if(J&&!X)rh[l]=z}}return z}});var em=B((XL,RO)=>{var HO=JT(),IO=nm(),B7=IO([HO("%String.prototype.indexOf%")]);RO.exports=function(P,T){var m=HO(P,!!T);if(typeof m==="function"&&B7(P,".prototype.")>-1)return IO([m]);return m}});var h_=B((ML,uO)=>{var S7=JT(),QP=em(),N7=OP(),K7=nh(),wO=S7("%Map%",!0),A7=QP("Map.prototype.get",!0),$7=QP("Map.prototype.set",!0),H7=QP("Map.prototype.has",!0),I7=QP("Map.prototype.delete",!0),R7=QP("Map.prototype.size",!0);uO.exports=!!wO&&function(){var P,T={assert:function(m){if(!T.has(m))throw new K7("Side channel does not contain "+N7(m))},delete:function(m){if(P){var _=I7(P,m);if(R7(P)===0)P=void 0;return _}return!1},get:function(m){if(P)return A7(P,m)},has:function(m){if(P)return H7(P,m);return!1},set:function(m,_){if(!P)P=new wO;$7(P,m,_)}};return T}});var xO=B((LL,CO)=>{var w7=JT(),MT=em(),u7=OP(),XT=h_(),C7=nh(),F1=w7("%WeakMap%",!0),x7=MT("WeakMap.prototype.get",!0),g7=MT("WeakMap.prototype.set",!0),i7=MT("WeakMap.prototype.has",!0),q7=MT("WeakMap.prototype.delete",!0);CO.exports=F1?function(){var P,T,m={assert:function(_){if(!m.has(_))throw new C7("Side channel does not contain "+u7(_))},delete:function(_){if(F1&&_&&(typeof _==="object"||typeof _==="function")){if(P)return q7(P,_)}else if(XT){if(T)return T.delete(_)}return!1},get:function(_){if(F1&&_&&(typeof _==="object"||typeof _==="function")){if(P)return x7(P,_)}return T&&T.get(_)},has:function(_){if(F1&&_&&(typeof _==="object"||typeof _==="function")){if(P)return i7(P,_)}return!!T&&T.has(_)},set:function(_,G){if(F1&&_&&(typeof _==="object"||typeof _==="function")){if(!P)P=new F1;g7(P,_,G)}else if(XT){if(!T)T=XT();T.set(_,G)}}};return m}:XT});var P_=B((cL,gO)=>{var E7=nh(),V7=OP(),b7=QG(),D7=h_(),k7=xO(),o7=k7||D7||b7;gO.exports=function(){var P,T={assert:function(m){if(!T.has(m))throw new E7("Side channel does not contain "+V7(m))},delete:function(m){return!!P&&P.delete(m)},get:function(m){return P&&P.get(m)},has:function(m){return!!P&&P.has(m)},set:function(m,_){if(!P)P=o7();P.set(m,_)}};return T}});var LT=B((YL,iO)=>{var y7=String.prototype.replace,p7=/%20/g,T_={RFC1738:"RFC1738",RFC3986:"RFC3986"};iO.exports={default:T_.RFC3986,formatters:{RFC1738:function(h){return y7.call(h,p7,"+")},RFC3986:function(h){return String(h)}},RFC1738:T_.RFC1738,RFC3986:T_.RFC3986}});var O_=B((FL,VO)=>{var j7=LT(),n7=P_(),m_=Object.prototype.hasOwnProperty,ah=Array.isArray,YT=n7(),qO=function(P,T){return YT.set(P,T),P},cT=function(P){return YT.has(P)},f_=function(P){return YT.get(P)},EO=function(P,T){YT.set(P,T)},Fh=function(){var h=[];for(var P=0;P<256;++P)h.push("%"+((P<16?"0":"")+P.toString(16)).toUpperCase());return h}(),t7=function(P){while(P.length>1){var T=P.pop(),m=T.obj[T.prop];if(ah(m)){var _=[];for(var G=0;G<m.length;++G)if(typeof m[G]<"u")_.push(m[G]);T.obj[T.prop]=_}}},G_=function(P,T){var m=T&&T.plainObjects?{__proto__:null}:{};for(var _=0;_<P.length;++_)if(typeof P[_]<"u")m[_]=P[_];return m},r7=function h(P,T,m){if(!T)return P;if(typeof T!=="object"&&typeof T!=="function"){if(ah(P))P.push(T);else if(P&&typeof P==="object"){if(cT(P)){var _=f_(P)+1;P[_]=T,EO(P,_)}else if(m&&(m.plainObjects||m.allowPrototypes)||!m_.call(Object.prototype,T))P[T]=!0}else return[P,T];return P}if(!P||typeof P!=="object"){if(cT(T)){var G=Object.keys(T),l=m&&m.plainObjects?{__proto__:null,0:P}:{0:P};for(var z=0;z<G.length;z++){var X=parseInt(G[z],10);l[X+1]=T[G[z]]}return qO(l,f_(T)+1)}return[P].concat(T)}var L=P;if(ah(P)&&!ah(T))L=G_(P,m);if(ah(P)&&ah(T))return T.forEach(function(Z,J){if(m_.call(P,J)){var Q=P[J];if(Q&&typeof Q==="object"&&Z&&typeof Z==="object")P[J]=h(Q,Z,m);else P.push(Z)}else P[J]=Z}),P;return Object.keys(T).reduce(function(Z,J){var Q=T[J];if(m_.call(Z,J))Z[J]=h(Z[J],Q,m);else Z[J]=Q;return Z},L)},a7=function(P,T){return Object.keys(T).reduce(function(m,_){return m[_]=T[_],m},P)},s7=function(h,P,T){var m=h.replace(/\+/g," ");if(T==="iso-8859-1")return m.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(m)}catch(_){return m}},__=1024,e7=function(P,T,m,_,G){if(P.length===0)return P;var l=P;if(typeof P==="symbol")l=Symbol.prototype.toString.call(P);else if(typeof P!=="string")l=String(P);if(m==="iso-8859-1")return escape(l).replace(/%u[0-9a-f]{4}/gi,function(F){return"%26%23"+parseInt(F.slice(2),16)+"%3B"});var z="";for(var X=0;X<l.length;X+=__){var L=l.length>=__?l.slice(X,X+__):l,Z=[];for(var J=0;J<L.length;++J){var Q=L.charCodeAt(J);if(Q===45||Q===46||Q===95||Q===126||Q>=48&&Q<=57||Q>=65&&Q<=90||Q>=97&&Q<=122||G===j7.RFC1738&&(Q===40||Q===41)){Z[Z.length]=L.charAt(J);continue}if(Q<128){Z[Z.length]=Fh[Q];continue}if(Q<2048){Z[Z.length]=Fh[192|Q>>6]+Fh[128|Q&63];continue}if(Q<55296||Q>=57344){Z[Z.length]=Fh[224|Q>>12]+Fh[128|Q>>6&63]+Fh[128|Q&63];continue}J+=1,Q=65536+((Q&1023)<<10|L.charCodeAt(J)&1023),Z[Z.length]=Fh[240|Q>>18]+Fh[128|Q>>12&63]+Fh[128|Q>>6&63]+Fh[128|Q&63]}z+=Z.join("")}return z},hz=function(P){var T=[{obj:{o:P},prop:"o"}],m=[];for(var _=0;_<T.length;++_){var G=T[_],l=G.obj[G.prop],z=Object.keys(l);for(var X=0;X<z.length;++X){var L=z[X],Z=l[L];if(typeof Z==="object"&&Z!==null&&m.indexOf(Z)===-1)T.push({obj:l,prop:L}),m.push(Z)}}return t7(T),P},Pz=function(P){return Object.prototype.toString.call(P)==="[object RegExp]"},Tz=function(P){if(!P||typeof P!=="object")return!1;return!!(P.constructor&&P.constructor.isBuffer&&P.constructor.isBuffer(P))},mz=function(P,T,m,_){if(cT(P)){var G=f_(P)+1;return P[G]=T,EO(P,G),P}var l=[].concat(P,T);if(l.length>m)return qO(G_(l,{plainObjects:_}),l.length-1);return l},_z=function(P,T){if(ah(P)){var m=[];for(var _=0;_<P.length;_+=1)m.push(T(P[_]));return m}return T(P)};VO.exports={arrayToObject:G_,assign:a7,combine:mz,compact:hz,decode:s7,encode:e7,isBuffer:Tz,isOverflow:cT,isRegExp:Pz,maybeMap:_z,merge:r7}});var pO=B((dL,yO)=>{var DO=P_(),FT=O_(),JP=LT(),fz=Object.prototype.hasOwnProperty,kO={brackets:function(P){return P+"[]"},comma:"comma",indices:function(P,T){return P+"["+T+"]"},repeat:function(P){return P}},dh=Array.isArray,Gz=Array.prototype.push,oO=function(h,P){Gz.apply(h,dh(P)?P:[P])},Oz=Date.prototype.toISOString,bO=JP.default,k={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:FT.encode,encodeValuesOnly:!1,filter:void 0,format:bO,formatter:JP.formatters[bO],indices:!1,serializeDate:function(P){return Oz.call(P)},skipNulls:!1,strictNullHandling:!1},lz=function(P){return typeof P==="string"||typeof P==="number"||typeof P==="boolean"||typeof P==="symbol"||typeof P==="bigint"},l_={},vz=function h(P,T,m,_,G,l,z,X,L,Z,J,Q,F,Y,U,W,N,d){var c=P,S=d,A=0,V=!1;while((S=S.get(l_))!==void 0&&!V){var w=S.get(P);if(A+=1,typeof w<"u")if(w===A)throw RangeError("Cyclic object value");else V=!0;if(typeof S.get(l_)>"u")A=0}if(typeof Z==="function")c=Z(T,c);else if(c instanceof Date)c=F(c);else if(m==="comma"&&dh(c))c=FT.maybeMap(c,function(aT){if(aT instanceof Date)return F(aT);return aT});if(c===null){if(l)return L&&!W?L(T,k.encoder,N,"key",Y):T;c=""}if(lz(c)||FT.isBuffer(c)){if(L){var p=W?T:L(T,k.encoder,N,"key",Y);return[U(p)+"="+U(L(c,k.encoder,N,"value",Y))]}return[U(T)+"="+U(String(c))]}var i=[];if(typeof c>"u")return i;var vh;if(m==="comma"&&dh(c)){if(W&&L)c=FT.maybeMap(c,L);vh=[{value:c.length>0?c.join(",")||null:void 0}]}else if(dh(Z))vh=Z;else{var CP=Object.keys(c);vh=J?CP.sort(J):CP}var _1=X?String(T).replace(/\./g,"%2E"):String(T),mh=_&&dh(c)&&c.length===1?_1+"[]":_1;if(G&&dh(c)&&c.length===0)return mh+"[]";for(var $h=0;$h<vh.length;++$h){var Sh=vh[$h],u1=typeof Sh==="object"&&Sh&&typeof Sh.value<"u"?Sh.value:c[Sh];if(z&&u1===null)continue;var rT=Q&&X?String(Sh).replace(/\./g,"%2E"):String(Sh),G5=dh(c)?typeof m==="function"?m(mh,rT):mh:mh+(Q?"."+rT:"["+rT+"]");d.set(P,A);var x_=DO();x_.set(l_,d),oO(i,h(u1,G5,m,_,G,l,z,X,m==="comma"&&W&&dh(c)?null:L,Z,J,Q,F,Y,U,W,N,x_))}return i},zz=function(P){if(!P)return k;if(typeof P.allowEmptyArrays<"u"&&typeof P.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof P.encodeDotInKeys<"u"&&typeof P.encodeDotInKeys!=="boolean")throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(P.encoder!==null&&typeof P.encoder<"u"&&typeof P.encoder!=="function")throw TypeError("Encoder has to be a function.");var T=P.charset||k.charset;if(typeof P.charset<"u"&&P.charset!=="utf-8"&&P.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var m=JP.default;if(typeof P.format<"u"){if(!fz.call(JP.formatters,P.format))throw TypeError("Unknown format option provided.");m=P.format}var _=JP.formatters[m],G=k.filter;if(typeof P.filter==="function"||dh(P.filter))G=P.filter;var l;if(P.arrayFormat in kO)l=P.arrayFormat;else if("indices"in P)l=P.indices?"indices":"repeat";else l=k.arrayFormat;if("commaRoundTrip"in P&&typeof P.commaRoundTrip!=="boolean")throw TypeError("`commaRoundTrip` must be a boolean, or absent");var z=typeof P.allowDots>"u"?P.encodeDotInKeys===!0?!0:k.allowDots:!!P.allowDots;return{addQueryPrefix:typeof P.addQueryPrefix==="boolean"?P.addQueryPrefix:k.addQueryPrefix,allowDots:z,allowEmptyArrays:typeof P.allowEmptyArrays==="boolean"?!!P.allowEmptyArrays:k.allowEmptyArrays,arrayFormat:l,charset:T,charsetSentinel:typeof P.charsetSentinel==="boolean"?P.charsetSentinel:k.charsetSentinel,commaRoundTrip:!!P.commaRoundTrip,delimiter:typeof P.delimiter>"u"?k.delimiter:P.delimiter,encode:typeof P.encode==="boolean"?P.encode:k.encode,encodeDotInKeys:typeof P.encodeDotInKeys==="boolean"?P.encodeDotInKeys:k.encodeDotInKeys,encoder:typeof P.encoder==="function"?P.encoder:k.encoder,encodeValuesOnly:typeof P.encodeValuesOnly==="boolean"?P.encodeValuesOnly:k.encodeValuesOnly,filter:G,format:m,formatter:_,serializeDate:typeof P.serializeDate==="function"?P.serializeDate:k.serializeDate,skipNulls:typeof P.skipNulls==="boolean"?P.skipNulls:k.skipNulls,sort:typeof P.sort==="function"?P.sort:null,strictNullHandling:typeof P.strictNullHandling==="boolean"?P.strictNullHandling:k.strictNullHandling}};yO.exports=function(h,P){var T=h,m=zz(P),_,G;if(typeof m.filter==="function")G=m.filter,T=G("",T);else if(dh(m.filter))G=m.filter,_=G;var l=[];if(typeof T!=="object"||T===null)return"";var z=kO[m.arrayFormat],X=z==="comma"&&m.commaRoundTrip;if(!_)_=Object.keys(T);if(m.sort)_.sort(m.sort);var L=DO();for(var Z=0;Z<_.length;++Z){var J=_[Z],Q=T[J];if(m.skipNulls&&Q===null)continue;oO(l,vz(Q,J,z,X,m.allowEmptyArrays,m.strictNullHandling,m.skipNulls,m.encodeDotInKeys,m.encode?m.encoder:null,m.filter,m.sort,m.allowDots,m.serializeDate,m.format,m.formatter,m.encodeValuesOnly,m.charset,L))}var F=l.join(m.delimiter),Y=m.addQueryPrefix===!0?"?":"";if(m.charsetSentinel)if(m.charset==="iso-8859-1")Y+="utf8=%26%2310003%3B&";else Y+="utf8=%E2%9C%93&";return F.length>0?Y+F:""}});var rO=B((UL,tO)=>{var xh=O_(),dT=Object.prototype.hasOwnProperty,jO=Array.isArray,q={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:xh.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1000,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},Zz=function(h){return h.replace(/&#(\d+);/g,function(P,T){return String.fromCharCode(parseInt(T,10))})},nO=function(h,P,T){if(h&&typeof h==="string"&&P.comma&&h.indexOf(",")>-1)return h.split(",");if(P.throwOnLimitExceeded&&T>=P.arrayLimit)throw RangeError("Array limit exceeded. Only "+P.arrayLimit+" element"+(P.arrayLimit===1?"":"s")+" allowed in an array.");return h},Qz="utf8=%26%2310003%3B",Jz="utf8=%E2%9C%93",Xz=function(P,T){var m={__proto__:null},_=T.ignoreQueryPrefix?P.replace(/^\?/,""):P;_=_.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var G=T.parameterLimit===1/0?void 0:T.parameterLimit,l=_.split(T.delimiter,T.throwOnLimitExceeded?G+1:G);if(T.throwOnLimitExceeded&&l.length>G)throw RangeError("Parameter limit exceeded. Only "+G+" parameter"+(G===1?"":"s")+" allowed.");var z=-1,X,L=T.charset;if(T.charsetSentinel){for(X=0;X<l.length;++X)if(l[X].indexOf("utf8=")===0){if(l[X]===Jz)L="utf-8";else if(l[X]===Qz)L="iso-8859-1";z=X,X=l.length}}for(X=0;X<l.length;++X){if(X===z)continue;var Z=l[X],J=Z.indexOf("]="),Q=J===-1?Z.indexOf("="):J+1,F,Y;if(Q===-1)F=T.decoder(Z,q.decoder,L,"key"),Y=T.strictNullHandling?null:"";else if(F=T.decoder(Z.slice(0,Q),q.decoder,L,"key"),F!==null)Y=xh.maybeMap(nO(Z.slice(Q+1),T,jO(m[F])?m[F].length:0),function(W){return T.decoder(W,q.decoder,L,"value")});if(Y&&T.interpretNumericEntities&&L==="iso-8859-1")Y=Zz(String(Y));if(Z.indexOf("[]=")>-1)Y=jO(Y)?[Y]:Y;if(F!==null){var U=dT.call(m,F);if(U&&T.duplicates==="combine")m[F]=xh.combine(m[F],Y,T.arrayLimit,T.plainObjects);else if(!U||T.duplicates==="last")m[F]=Y}}return m},Mz=function(h,P,T,m){var _=0;if(h.length>0&&h[h.length-1]==="[]"){var G=h.slice(0,-1).join("");_=Array.isArray(P)&&P[G]?P[G].length:0}var l=m?P:nO(P,T,_);for(var z=h.length-1;z>=0;--z){var X,L=h[z];if(L==="[]"&&T.parseArrays)if(xh.isOverflow(l))X=l;else X=T.allowEmptyArrays&&(l===""||T.strictNullHandling&&l===null)?[]:xh.combine([],l,T.arrayLimit,T.plainObjects);else{X=T.plainObjects?{__proto__:null}:{};var Z=L.charAt(0)==="["&&L.charAt(L.length-1)==="]"?L.slice(1,-1):L,J=T.decodeDotInKeys?Z.replace(/%2E/g,"."):Z,Q=parseInt(J,10);if(!T.parseArrays&&J==="")X={0:l};else if(!isNaN(Q)&&L!==J&&String(Q)===J&&Q>=0&&(T.parseArrays&&Q<=T.arrayLimit))X=[],X[Q]=l;else if(J!=="__proto__")X[J]=l}l=X}return l},Lz=function(P,T){var m=T.allowDots?P.replace(/\.([^.[]+)/g,"[$1]"):P;if(T.depth<=0){if(!T.plainObjects&&dT.call(Object.prototype,m)){if(!T.allowPrototypes)return}return[m]}var _=/(\[[^[\]]*])/,G=/(\[[^[\]]*])/g,l=_.exec(m),z=l?m.slice(0,l.index):m,X=[];if(z){if(!T.plainObjects&&dT.call(Object.prototype,z)){if(!T.allowPrototypes)return}X.push(z)}var L=0;while((l=G.exec(m))!==null&&L<T.depth){L+=1;var Z=l[1].slice(1,-1);if(!T.plainObjects&&dT.call(Object.prototype,Z)){if(!T.allowPrototypes)return}X.push(l[1])}if(l){if(T.strictDepth===!0)throw RangeError("Input depth exceeded depth option of "+T.depth+" and strictDepth is true");X.push("["+m.slice(l.index)+"]")}return X},cz=function(P,T,m,_){if(!P)return;var G=Lz(P,m);if(!G)return;return Mz(G,T,m,_)},Yz=function(P){if(!P)return q;if(typeof P.allowEmptyArrays<"u"&&typeof P.allowEmptyArrays!=="boolean")throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof P.decodeDotInKeys<"u"&&typeof P.decodeDotInKeys!=="boolean")throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(P.decoder!==null&&typeof P.decoder<"u"&&typeof P.decoder!=="function")throw TypeError("Decoder has to be a function.");if(typeof P.charset<"u"&&P.charset!=="utf-8"&&P.charset!=="iso-8859-1")throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof P.throwOnLimitExceeded<"u"&&typeof P.throwOnLimitExceeded!=="boolean")throw TypeError("`throwOnLimitExceeded` option must be a boolean");var T=typeof P.charset>"u"?q.charset:P.charset,m=typeof P.duplicates>"u"?q.duplicates:P.duplicates;if(m!=="combine"&&m!=="first"&&m!=="last")throw TypeError("The duplicates option must be either combine, first, or last");var _=typeof P.allowDots>"u"?P.decodeDotInKeys===!0?!0:q.allowDots:!!P.allowDots;return{allowDots:_,allowEmptyArrays:typeof P.allowEmptyArrays==="boolean"?!!P.allowEmptyArrays:q.allowEmptyArrays,allowPrototypes:typeof P.allowPrototypes==="boolean"?P.allowPrototypes:q.allowPrototypes,allowSparse:typeof P.allowSparse==="boolean"?P.allowSparse:q.allowSparse,arrayLimit:typeof P.arrayLimit==="number"?P.arrayLimit:q.arrayLimit,charset:T,charsetSentinel:typeof P.charsetSentinel==="boolean"?P.charsetSentinel:q.charsetSentinel,comma:typeof P.comma==="boolean"?P.comma:q.comma,decodeDotInKeys:typeof P.decodeDotInKeys==="boolean"?P.decodeDotInKeys:q.decodeDotInKeys,decoder:typeof P.decoder==="function"?P.decoder:q.decoder,delimiter:typeof P.delimiter==="string"||xh.isRegExp(P.delimiter)?P.delimiter:q.delimiter,depth:typeof P.depth==="number"||P.depth===!1?+P.depth:q.depth,duplicates:m,ignoreQueryPrefix:P.ignoreQueryPrefix===!0,interpretNumericEntities:typeof P.interpretNumericEntities==="boolean"?P.interpretNumericEntities:q.interpretNumericEntities,parameterLimit:typeof P.parameterLimit==="number"?P.parameterLimit:q.parameterLimit,parseArrays:P.parseArrays!==!1,plainObjects:typeof P.plainObjects==="boolean"?P.plainObjects:q.plainObjects,strictDepth:typeof P.strictDepth==="boolean"?!!P.strictDepth:q.strictDepth,strictNullHandling:typeof P.strictNullHandling==="boolean"?P.strictNullHandling:q.strictNullHandling,throwOnLimitExceeded:typeof P.throwOnLimitExceeded==="boolean"?P.throwOnLimitExceeded:!1}};tO.exports=function(h,P){var T=Yz(P);if(h===""||h===null||typeof h>"u")return T.plainObjects?{__proto__:null}:{};var m=typeof h==="string"?Xz(h,T):h,_=T.plainObjects?{__proto__:null}:{},G=Object.keys(m);for(var l=0;l<G.length;++l){var z=G[l],X=cz(z,m[z],T,typeof h==="string");_=xh.merge(_,X,T)}if(T.allowSparse===!0)return _;return xh.compact(_)}});var sO=B((WL,aO)=>{var Fz=pO(),dz=rO(),Uz=LT();aO.exports={formats:Uz,parse:dz,stringify:Fz}});function hl(h){return h&&typeof h==="object"&&v_.some((P)=>Object.prototype.hasOwnProperty.call(h,P))}function gh(h,P){return eO.stringify(h,{serializeDate:(T)=>Math.floor(T.getTime()/1000).toString(),arrayFormat:P=="v2"?"repeat":"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}function Pl(h){let P=h.match(/\{\w+\}/g);if(!P)return[];return P.map((T)=>T.replace(/[{}]/g,""))}function d1(h){if(!Array.isArray(h)||!h[0]||typeof h[0]!=="object")return{};if(!hl(h[0]))return h.shift();let P=Object.keys(h[0]),T=P.filter((m)=>v_.includes(m));if(T.length>0&&T.length!==P.length)MP(`Options found in arguments (${T.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`);return{}}function BT(h){let P={host:null,headers:{},settings:{}};if(h.length>0){let T=h[h.length-1];if(typeof T==="string")P.authenticator=UT(h.pop());else if(hl(T)){let m=Object.assign({},h.pop()),_=Object.keys(m).filter((G)=>!v_.includes(G));if(_.length)MP(`Invalid options found (${_.join(", ")}); ignoring.`);if(m.apiKey)P.authenticator=UT(m.apiKey);if(m.idempotencyKey)P.headers["Idempotency-Key"]=m.idempotencyKey;if(m.stripeAccount)P.headers["Stripe-Account"]=m.stripeAccount;if(m.stripeContext){if(P.headers["Stripe-Account"])throw Error("Can't specify both stripeAccount and stripeContext.");P.headers["Stripe-Context"]=m.stripeContext}if(m.apiVersion)P.headers["Stripe-Version"]=m.apiVersion;if(Number.isInteger(m.maxNetworkRetries))P.settings.maxNetworkRetries=m.maxNetworkRetries;if(Number.isInteger(m.timeout))P.settings.timeout=m.timeout;if(m.host)P.host=m.host;if(m.authenticator){if(m.apiKey)throw Error("Can't specify both apiKey and authenticator.");if(typeof m.authenticator!=="function")throw Error("The authenticator must be a function receiving a request as the first parameter.");P.authenticator=m.authenticator}if(m.additionalHeaders)P.headers=m.additionalHeaders}}return P}function Tl(h){let P=this,T=Object.prototype.hasOwnProperty.call(h,"constructor")?h.constructor:function(...m){P.apply(this,m)};return Object.assign(T,P),T.prototype=Object.create(P.prototype),Object.assign(T.prototype,h),T}function ST(h){if(typeof h!=="object")throw Error("Argument must be an object");return Object.keys(h).reduce((P,T)=>{if(h[T]!=null)P[T]=h[T];return P},{})}function ml(h){if(!(h&&typeof h==="object"))return h;return Object.keys(h).reduce((P,T)=>{return P[Wz(T)]=h[T],P},{})}function Wz(h){return h.split("-").map((P)=>P.charAt(0).toUpperCase()+P.substr(1).toLowerCase()).join("-")}function XP(h,P){if(P)return h.then((T)=>{setTimeout(()=>{P(null,T)},0)},(T)=>{setTimeout(()=>{P(T,null)},0)});return h}function _l(h){if(h==="OAuth")return"oauth";else return h[0].toLowerCase()+h.substring(1)}function MP(h){if(typeof process.emitWarning!=="function")return console.warn(`Stripe: ${h}`);return process.emitWarning(h,"Stripe")}function Bz(h){let P=typeof h;return(P==="function"||P==="object")&&!!h}function fl(h){let P={},T=(m,_)=>{Object.entries(m).forEach(([G,l])=>{let z=_?`${_}[${G}]`:G;if(Bz(l))if(!(l instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(l,"data"))return T(l,z);else P[z]=l;else P[z]=String(l)})};return T(h,null),P}function NT(h,P,T){if(!Number.isInteger(P))if(T!==void 0)return T;else throw Error(`${h} must be an integer`);return P}function Gl(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function UT(h){let P=(T)=>{return T.headers.Authorization="Bearer "+h,Promise.resolve()};return P._apiKey=h,P}function Sz(h,P){if(this[h]instanceof Date)return Math.floor(this[h].getTime()/1000).toString();return P}function Ol(h){return JSON.stringify(h,Sz)}function U1(h){if(!h)return"v1";return h.startsWith("/v2")?"v2":"v1"}var eO,v_,WT;var ih=v(()=>{eO=Z5(sO(),1),v_=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders"];WT=(()=>{let h={"\n":"\\n",'"':"\\\"","\u2028":"\\u2028","\u2029":"\\u2029"};return(P)=>{let T=P.replace(/["\n\r\u2028\u2029]/g,(m)=>h[m]);return(m)=>{return T.replace(/\{([\s\S]+?)\}/g,(_,G)=>encodeURIComponent(m[G]||""))}}})()});class W1{constructor(h,P){this._stripe=h,this._maxBufferedRequestMetric=P}_addHeadersDirectlyToObject(h,P){h.requestId=P["request-id"],h.stripeAccount=h.stripeAccount||P["stripe-account"],h.apiVersion=h.apiVersion||P["stripe-version"],h.idempotencyKey=h.idempotencyKey||P["idempotency-key"]}_makeResponseEvent(h,P,T){let m=Date.now(),_=m-h.request_start_time;return ST({api_version:T["stripe-version"],account:T["stripe-account"],idempotency_key:T["idempotency-key"],method:h.method,path:h.path,status:P,request_id:this._getRequestId(T),elapsed:_,request_start_time:h.request_start_time,request_end_time:m})}_getRequestId(h){return h["request-id"]}_streamingResponseHandler(h,P,T){return(m)=>{let _=m.getHeaders(),G=()=>{let z=this._makeResponseEvent(h,m.getStatusCode(),_);this._stripe._emitter.emit("response",z),this._recordRequestMetrics(this._getRequestId(_),z.elapsed,P)},l=m.toStream(G);return this._addHeadersDirectlyToObject(l,_),T(null,l)}}_jsonResponseHandler(h,P,T,m){return(_)=>{let G=_.getHeaders(),l=this._getRequestId(G),z=_.getStatusCode(),X=this._makeResponseEvent(h,z,G);this._stripe._emitter.emit("response",X),_.toJSON().then((L)=>{if(L.error){let Z;if(typeof L.error==="string")L.error={type:L.error,message:L.error_description};if(L.error.headers=G,L.error.statusCode=z,L.error.requestId=l,z===401)Z=new PP(L.error);else if(z===403)Z=new hT(L.error);else if(z===429)Z=new TP(L.error);else if(P==="v2")Z=Nm(L.error);else Z=e1(L.error);throw Z}return L},(L)=>{throw new hP({message:"Invalid JSON received from the Stripe API",exception:L,requestId:G["request-id"]})}).then((L)=>{this._recordRequestMetrics(l,X.elapsed,T);let Z=_.getRawResponse();this._addHeadersDirectlyToObject(Z,G),Object.defineProperty(L,"lastResponse",{enumerable:!1,writable:!1,value:Z}),m(null,L)},(L)=>m(L,null))}}static _generateConnectionErrorMessage(h){return`An error occurred with our connection to Stripe.${h>0?` Request was retried ${h} times.`:""}`}static _shouldRetry(h,P,T,m){if(m&&P===0&&j.CONNECTION_CLOSED_ERROR_CODES.includes(m.code))return!0;if(P>=T)return!1;if(!h)return!0;if(h.getHeaders()["stripe-should-retry"]==="false")return!1;if(h.getHeaders()["stripe-should-retry"]==="true")return!0;if(h.getStatusCode()===409)return!0;if(h.getStatusCode()>=500)return!0;return!1}_getSleepTimeInMS(h,P=null){let T=this._stripe.getInitialNetworkRetryDelay(),m=this._stripe.getMaxNetworkRetryDelay(),_=Math.min(T*Math.pow(2,h-1),m);if(_*=0.5*(1+Math.random()),_=Math.max(T,_),Number.isInteger(P)&&P<=Nz)_=Math.max(_,P);return _*1000}_getMaxNetworkRetries(h={}){return h.maxNetworkRetries!==void 0&&Number.isInteger(h.maxNetworkRetries)?h.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(h,P,T){let m=this._getMaxNetworkRetries(P),_=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(T==="v2"){if(h==="POST"||h==="DELETE")return _()}else if(T==="v1"){if(h==="POST"&&m>0)return _()}return null}_makeHeaders({contentType:h,contentLength:P,apiVersion:T,clientUserAgent:m,method:_,userSuppliedHeaders:G,userSuppliedSettings:l,stripeAccount:z,stripeContext:X,apiMode:L}){let Z={Accept:"application/json","Content-Type":h,"User-Agent":this._getUserAgentString(L),"X-Stripe-Client-User-Agent":m,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":T,"Stripe-Account":z,"Stripe-Context":X,"Idempotency-Key":this._defaultIdempotencyKey(_,l,L)},J=_=="POST"||_=="PUT"||_=="PATCH";if(J||P){if(!J)MP(`${_} method had non-zero contentLength but no payload is expected for this verb`);Z["Content-Length"]=P}return Object.assign(ST(Z),ml(G))}_getUserAgentString(h){let P=this._stripe.getConstant("PACKAGE_VERSION"),T=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${h} NodeBindings/${P} ${T}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){let h=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:h})}}_recordRequestMetrics(h,P,T){if(this._stripe.getTelemetryEnabled()&&h)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)MP("Request metrics buffer is full, dropping telemetry message.");else{let m={request_id:h,request_duration_ms:P};if(T&&T.length>0)m.usage=T;this._stripe._prevRequestMetrics.push(m)}}_rawRequest(h,P,T,m){return new Promise((G,l)=>{let z;try{let Q=h.toUpperCase();if(Q!=="POST"&&T&&Object.keys(T).length!==0)throw Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");let F=[].slice.call([T,m]),Y=d1(F),U=Object.assign({},Y),W=BT(F),N=W.headers,d=W.authenticator;z={requestMethod:Q,requestPath:P,bodyData:U,queryData:{},authenticator:d,headers:N,host:null,streaming:!1,settings:{},usage:["raw_request"]}}catch(Q){l(Q);return}function X(Q,F){if(Q)l(Q);else G(F)}let{headers:L,settings:Z}=z,J=z.authenticator;this._request(z.requestMethod,z.host,P,z.bodyData,J,{headers:L,settings:Z,streaming:z.streaming},z.usage,X)})}_request(h,P,T,m,_,G,l=[],z,X=null){var L;let Z;_=(L=_!==null&&_!==void 0?_:this._stripe._authenticator)!==null&&L!==void 0?L:null;let J=U1(T),Q=(U,W,N,d,c)=>{return setTimeout(U,this._getSleepTimeInMS(d,c),W,N,d+1)},F=(U,W,N)=>{let d=G.settings&&G.settings.timeout&&Number.isInteger(G.settings.timeout)&&G.settings.timeout>=0?G.settings.timeout:this._stripe.getApiField("timeout"),c={host:P||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:T,method:h,headers:Object.assign({},W),body:Z,protocol:this._stripe.getApiField("protocol")};_(c).then(()=>{let S=this._stripe.getApiField("httpClient").makeRequest(c.host,c.port,c.path,c.method,c.headers,c.body,c.protocol,d),A=Date.now(),V=ST({api_version:U,account:W["Stripe-Account"],idempotency_key:W["Idempotency-Key"],method:h,path:T,request_start_time:A}),w=N||0,p=this._getMaxNetworkRetries(G.settings||{});this._stripe._emitter.emit("request",V),S.then((i)=>{if(W1._shouldRetry(i,w,p))return Q(F,U,W,w,i.getHeaders()["retry-after"]);else if(G.streaming&&i.getStatusCode()<400)return this._streamingResponseHandler(V,l,z)(i);else return this._jsonResponseHandler(V,J,l,z)(i)}).catch((i)=>{if(W1._shouldRetry(null,w,p,i))return Q(F,U,W,w,null);else{let vh=i.code&&i.code===j.TIMEOUT_ERROR_CODE;return z(new PT({message:vh?`Request aborted due to timeout being reached (${d}ms)`:W1._generateConnectionErrorMessage(w),detail:i}))}})}).catch((S)=>{throw new D({message:"Unable to authenticate the request",exception:S})})},Y=(U,W)=>{if(U)return z(U);Z=W,this._stripe.getClientUserAgent((N)=>{let d=this._stripe.getApiField("version"),c=this._makeHeaders({contentType:J=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:Z.length,apiVersion:d,clientUserAgent:N,method:h,userSuppliedHeaders:G.headers,userSuppliedSettings:G.settings,stripeAccount:J=="v2"?null:this._stripe.getApiField("stripeAccount"),stripeContext:J=="v2"?this._stripe.getApiField("stripeContext"):null,apiMode:J});F(d,c,0)})};if(X)X(h,m,G.headers,Y);else{let U;if(J=="v2")U=m?Ol(m):"";else U=gh(m||{},J);Y(null,U)}}}var Nz=60;var ll=v(()=>{mT();aP();ih()});class Z_{constructor(h,P,T,m){this.index=0,this.pagePromise=h,this.promiseCache={currentPromise:null},this.requestArgs=P,this.spec=T,this.stripeResource=m}async iterate(h){if(!(h&&h.data&&typeof h.data.length==="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");let P=Jl(this.requestArgs);if(this.index<h.data.length){let T=P?h.data.length-1-this.index:this.index,m=h.data[T];return this.index+=1,{value:m,done:!1}}else if(h.has_more){this.index=0,this.pagePromise=this.getNextPage(h);let T=await this.pagePromise;return this.iterate(T)}return{done:!0,value:void 0}}getNextPage(h){throw Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;let h=(async()=>{let P=await this._next();return this.promiseCache.currentPromise=null,P})();return this.promiseCache.currentPromise=h,h}}class Zl{constructor(h,P,T,m){this.currentPageIterator=(async()=>{return(await h).data[Symbol.iterator]()})(),this.nextPageUrl=(async()=>{return(await h).next_page_url||null})(),this.requestArgs=P,this.spec=T,this.stripeResource=m}async turnPage(){let h=await this.nextPageUrl;if(!h)return null;this.spec.fullPath=h;let P=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(P.next_page_url),this.currentPageIterator=Promise.resolve(P.data[Symbol.iterator]()),this.currentPageIterator}async next(){{let T=(await this.currentPageIterator).next();if(!T.done)return{done:!1,value:T.value}}let h=await this.turnPage();if(!h)return{done:!0,value:void 0};let P=h.next();if(!P.done)return{done:!1,value:P.value};return{done:!0,value:void 0}}}function Kz(){if(typeof Symbol<"u"&&Symbol.asyncIterator)return Symbol.asyncIterator;return"@@asyncIterator"}function Az(h){if(h.length<2)return null;let P=h[1];if(typeof P!=="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof P}`);return P}function $z(h){if(h.length===0)return;let P=h[0];if(typeof P!=="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof P}`);if(P.length===2)return P;if(P.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${P}`);return function(m,_){let G=P(m);_(G)}}function Hz(h,P){let T=P?0:h.data.length-1,m=h.data[T],_=m&&m.id;if(!_)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return _}function Iz(h){return function(){let T=[].slice.call(arguments),m=$z(T),_=Az(T);if(T.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${T}`);let G=wz(h,m);return XP(G,_)}}function Rz(h){return function(T,m){let _=T&&T.limit;if(!_)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(_>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");let G=new Promise((l,z)=>{let X=[];h((L)=>{if(X.push(L),X.length>=_)return!1}).then(()=>{l(X)}).catch(z)});return XP(G,m)}}function wz(h,P){return new Promise((T,m)=>{function _(G){if(G.done){T();return}let l=G.value;return new Promise((z)=>{P(l,z)}).then((z)=>{if(z===!1)return _({done:!0,value:void 0});else return h().then(_)})}h().then(_).catch(m)})}function Jl(h){let P=[].slice.call(h);return!!d1(P).ending_before}var vl,zl,Ql=(h,P,T,m)=>{let _=U1(T.fullPath||T.path);if(_!=="v2"&&T.methodType==="search")return z_(new zl(m,P,T,h));if(_!=="v2"&&T.methodType==="list")return z_(new vl(m,P,T,h));if(_==="v2"&&T.methodType==="list")return z_(new Zl(m,P,T,h));return null},z_=(h)=>{let P=Iz((..._)=>h.next(..._)),T=Rz(P),m={autoPagingEach:P,autoPagingToArray:T,next:()=>h.next(),return:()=>{return{}},[Kz()]:()=>{return m}};return m};var Xl=v(()=>{ih();vl=class vl extends Z_{getNextPage(h){let P=Jl(this.requestArgs),T=Hz(h,P);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[P?"ending_before":"starting_after"]:T})}};zl=class zl extends Z_{getNextPage(h){if(!h.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:h.next_page})}}});function Ml(h){if(h.path!==void 0&&h.fullPath!==void 0)throw Error(`Method spec specified both a 'path' (${h.path}) and a 'fullPath' (${h.fullPath}).`);return function(...P){let T=typeof P[P.length-1]=="function"&&P.pop();h.urlParams=Pl(h.fullPath||this.createResourcePathWithSymbols(h.path||""));let m=XP(this._makeRequest(P,h,{}),T);return Object.assign(m,Ql(this,P,h,m)),m}}var Ll=v(()=>{ih();Xl()});function f(h,P){if(this._stripe=h,P)throw Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=WT(this.basePath||h.getApiField("basePath")),this.resourcePath=this.path,this.path=WT(this.path),this.initialize(...arguments)}var M=v(()=>{ih();Ll();f.extend=Tl;f.method=Ml;f.MAX_BUFFERED_REQUEST_METRICS=100;f.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(h,P){let T=[this.basePath(P),this.path(P)];if(typeof h==="function"){let m=h(P);if(m)T.push(m)}else T.push(h);return this._joinUrlParts(T)},createResourcePathWithSymbols(h){if(h)return`/${this._joinUrlParts([this.resourcePath,h])}`;else return`/${this.resourcePath}`},_joinUrlParts(h){return h.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(h,P,T){var m;let _=(P.method||"GET").toUpperCase(),G=P.usage||[],l=P.urlParams||[],z=P.encode||((w)=>w),X=!!P.fullPath,L=WT(X?P.fullPath:P.path||""),Z=X?P.fullPath:this.createResourcePathWithSymbols(P.path),J=[].slice.call(h),Q=l.reduce((w,p)=>{let i=J.shift();if(typeof i!=="string")throw Error(`Stripe: Argument "${p}" must be a string, but got: ${i} (on API request to \`${_} ${Z}\`)`);return w[p]=i,w},{}),F=d1(J),Y=z(Object.assign({},F,T)),U=BT(J),W=U.host||P.host,N=!!P.streaming;if(J.filter((w)=>w!=null).length)throw Error(`Stripe: Unknown arguments (${J}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${_} \`${Z}\`)`);let d=X?L(Q):this.createFullPath(L,Q),c=Object.assign(U.headers,P.headers);if(P.validator)P.validator(Y,{headers:c});let S=P.method==="GET"||P.method==="DELETE";return{requestMethod:_,requestPath:d,bodyData:S?null:Y,queryData:S?Y:{},authenticator:(m=U.authenticator)!==null&&m!==void 0?m:null,headers:c,host:W!==null&&W!==void 0?W:null,streaming:N,settings:U.settings,usage:G}},_makeRequest(h,P,T){return new Promise((m,_)=>{var G;let l;try{l=this._getRequestOpts(h,P,T)}catch(Q){_(Q);return}function z(Q,F){if(Q)_(Q);else m(P.transformResponseData?P.transformResponseData(F):F)}let X=Object.keys(l.queryData).length===0,L=[l.requestPath,X?"":"?",gh(l.queryData,U1(l.requestPath))].join(""),{headers:Z,settings:J}=l;this._stripe._requestSender._request(l.requestMethod,l.host,L,l.bodyData,l.authenticator,{headers:Z,settings:J,streaming:l.streaming},l.usage,z,(G=this.requestDataProcessor)===null||G===void 0?void 0:G.bind(this))})}}});function Q_(h){let P={DEFAULT_TOLERANCE:300,signature:null,constructEvent(Z,J,Q,F,Y,U){try{this.signature.verifyHeader(Z,J,Q,F||P.DEFAULT_TOLERANCE,Y,U)}catch(N){if(N instanceof s1)N.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`";throw N}return Z instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(Z)):JSON.parse(Z)},async constructEventAsync(Z,J,Q,F,Y,U){return await this.signature.verifyHeaderAsync(Z,J,Q,F||P.DEFAULT_TOLERANCE,Y,U),Z instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(Z)):JSON.parse(Z)},generateTestHeaderString:function(Z){let J=L(Z),Q=J.signature||J.cryptoProvider.computeHMACSignature(J.payloadString,J.secret);return J.generateHeaderString(Q)},generateTestHeaderStringAsync:async function(Z){let J=L(Z),Q=J.signature||await J.cryptoProvider.computeHMACSignatureAsync(J.payloadString,J.secret);return J.generateHeaderString(Q)}},T={EXPECTED_SCHEME:"v1",verifyHeader(Z,J,Q,F,Y,U){let{decodedHeader:W,decodedPayload:N,details:d,suspectPayloadType:c}=_(Z,J,this.EXPECTED_SCHEME),S=/\s/.test(Q);Y=Y||X();let A=Y.computeHMACSignature(m(N,d),Q);return G(N,W,d,A,F,c,S,U),!0},async verifyHeaderAsync(Z,J,Q,F,Y,U){let{decodedHeader:W,decodedPayload:N,details:d,suspectPayloadType:c}=_(Z,J,this.EXPECTED_SCHEME),S=/\s/.test(Q);Y=Y||X();let A=await Y.computeHMACSignatureAsync(m(N,d),Q);return G(N,W,d,A,F,c,S,U)}};function m(Z,J){return`${J.timestamp}.${Z}`}function _(Z,J,Q){if(!Z)throw new ch(J,Z,{message:"No webhook payload was provided."});let F=typeof Z!="string"&&!(Z instanceof Uint8Array),Y=new TextDecoder("utf8"),U=Z instanceof Uint8Array?Y.decode(Z):Z;if(Array.isArray(J))throw Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(J==null||J=="")throw new ch(J,Z,{message:"No stripe-signature header value was provided."});let W=J instanceof Uint8Array?Y.decode(J):J,N=l(W,Q);if(!N||N.timestamp===-1)throw new ch(W,U,{message:"Unable to extract timestamp and signatures from header"});if(!N.signatures.length)throw new ch(W,U,{message:"No signatures found with expected scheme"});return{decodedPayload:U,decodedHeader:W,details:N,suspectPayloadType:F}}function G(Z,J,Q,F,Y,U,W,N){let d=!!Q.signatures.filter(h.secureCompare.bind(h,F)).length,c=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,S=W?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!d){if(U)throw new ch(J,Z,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+c+`
`+S});throw new ch(J,Z,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+c+`
`+S})}let A=Math.floor((typeof N==="number"?N:Date.now())/1000)-Q.timestamp;if(Y>0&&A>Y)throw new ch(J,Z,{message:"Timestamp outside the tolerance zone"});return!0}function l(Z,J){if(typeof Z!=="string")return null;return Z.split(",").reduce((Q,F)=>{let Y=F.split("=");if(Y[0]==="t")Q.timestamp=parseInt(Y[1],10);if(Y[0]===J)Q.signatures.push(Y[1]);return Q},{timestamp:-1,signatures:[]})}let z=null;function X(){if(!z)z=h.createDefaultCryptoProvider();return z}function L(Z){if(!Z)throw new D({message:"Options are required"});let J=Math.floor(Z.timestamp)||Math.floor(Date.now()/1000),Q=Z.scheme||T.EXPECTED_SCHEME,F=Z.cryptoProvider||X(),Y=`${J}.${Z.payload}`,U=(W)=>{return`t=${J},${Q}=${W}`};return Object.assign(Object.assign({},Z),{timestamp:J,scheme:Q,cryptoProvider:F,payloadString:Y,generateHeaderString:U})}return P.signature=T,P}var cl=v(()=>{mT();sP()});var Yl="2025-02-24.acacia";function uz(h,P){for(let T in P){if(!Object.prototype.hasOwnProperty.call(P,T))continue;let m=T[0].toLowerCase()+T.substring(1),_=new P[T](h);this[m]=_}}function x(h,P){return function(T){return new uz(T,P)}}var sh,Fl;var dl=v(()=>{M();sh=f.method,Fl=f.extend({retrieve:sh({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:sh({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:sh({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:sh({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:sh({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:sh({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:sh({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})})});var Ul,Wl;var Bl=v(()=>{M();Ul=f.method,Wl=f.extend({retrieve:Ul({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:Ul({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})})});var B1,Sl;var Nl=v(()=>{M();B1=f.method,Sl=f.extend({create:B1({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:B1({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:B1({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:B1({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:B1({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:B1({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})})});var eh,Kl;var Al=v(()=>{M();eh=f.method,Kl=f.extend({create:eh({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:eh({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:eh({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:eh({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:eh({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:eh({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:eh({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})})});var LP,$l;var Hl=v(()=>{M();LP=f.method,$l=f.extend({retrieve:LP({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:LP({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:LP({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:LP({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:LP({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})})});var J_,Il;var Rl=v(()=>{M();J_=f.method,Il=f.extend({create:J_({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:J_({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:J_({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})})});var KT,wl;var ul=v(()=>{M();KT=f.method,wl=f.extend({create:KT({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:KT({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:KT({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:KT({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})})});var cP,Cl;var xl=v(()=>{M();cP=f.method,Cl=f.extend({deliverCard:cP({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:cP({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:cP({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:cP({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:cP({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})})});var AT,gl;var il=v(()=>{M();AT=f.method,gl=f.extend({create:AT({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:AT({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:AT({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:AT({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})})});var $T,ql;var El=v(()=>{M();$T=f.method,ql=f.extend({create:$T({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:$T({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:$T({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:$T({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})})});var YP,Vl;var bl=v(()=>{M();YP=f.method,Vl=f.extend({create:YP({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:YP({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:YP({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:YP({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:YP({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})})});var Cz,Dl;var kl=v(()=>{M();Cz=f.method,Dl=f.extend({create:Cz({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})})});var xz,ol;var yl=v(()=>{M();xz=f.method,ol=f.extend({create:xz({method:"POST",fullPath:"/v1/terminal/connection_tokens"})})});var gz,pl;var jl=v(()=>{M();gz=f.method,pl=f.extend({retrieve:gz({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})})});var nl,tl;var rl=v(()=>{M();nl=f.method,tl=f.extend({retrieve:nl({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:nl({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})})});var S1,al;var sl=v(()=>{M();S1=f.method,al=f.extend({create:S1({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:S1({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:S1({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:S1({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:S1({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:S1({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})})});var X_,el;var hv=v(()=>{M();X_=f.method,el=f.extend({create:X_({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:X_({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:X_({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})})});var iz,Pv;var Tv=v(()=>{M();iz=f.method,Pv=f.extend({fundCashBalance:iz({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})})});var M_,mv;var _v=v(()=>{M();M_=f.method,mv=f.extend({create:M_({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:M_({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:M_({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})})});var FP,fv;var Gv=v(()=>{M();FP=f.method,fv=f.extend({create:FP({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:FP({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:FP({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:FP({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:FP({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})})});var Ov,lv;var vv=v(()=>{M();Ov=f.method,lv=f.extend({retrieve:Ov({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:Ov({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})})});var qh,zv;var Zv=v(()=>{M();qh=f.method,zv=f.extend({create:qh({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:qh({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:qh({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:qh({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:qh({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:qh({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:qh({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:qh({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})})});var L_,Qv;var Jv=v(()=>{M();L_=f.method,Qv=f.extend({retrieve(...h){return L_({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:(T)=>{return this.addFetchRelatedObjectIfNeeded(T)}}).apply(this,h)},list(...h){return L_({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:(T)=>{return Object.assign(Object.assign({},T),{data:T.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}}).apply(this,h)},addFetchRelatedObjectIfNeeded(h){if(!h.related_object||!h.related_object.url)return h;return Object.assign(Object.assign({},h),{fetchRelatedObject:()=>L_({method:"GET",fullPath:h.related_object.url}).apply(this,[{stripeAccount:h.context}])})}})});var HT,Xv;var Mv=v(()=>{M();HT=f.method,Xv=f.extend({create:HT({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:HT({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:HT({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:HT({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})})});var h1,Lv;var cv=v(()=>{M();h1=f.method,Lv=f.extend({create:h1({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:h1({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:h1({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:h1({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:h1({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:h1({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:h1({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})})});var c_,Yv;var Fv=v(()=>{M();c_=f.method,Yv=f.extend({fail:c_({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:c_({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:c_({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})})});var IT,dv;var Uv=v(()=>{M();IT=f.method,dv=f.extend({create:IT({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:IT({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:IT({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:IT({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})})});var dP,Wv;var Bv=v(()=>{M();dP=f.method,Wv=f.extend({create:dP({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:dP({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:dP({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:dP({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:dP({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})})});var qz,Sv;var Nv=v(()=>{M();qz=f.method,Sv=f.extend({create:qz({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})})});var Ez,Kv;var Av=v(()=>{M();Ez=f.method,Kv=f.extend({create:Ez({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})})});var Vz,$v;var Hv=v(()=>{M();Vz=f.method,$v=f.extend({create:Vz({method:"POST",fullPath:"/v2/billing/meter_event_session"})})});var bz,Iv;var Rv=v(()=>{M();bz=f.method,Iv=f.extend({create:bz({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})})});var Dz,wv;var uv=v(()=>{M();Dz=f.method,wv=f.extend({create:Dz({method:"POST",fullPath:"/v1/billing/meter_events"})})});var kz,Cv;var xv=v(()=>{M();kz=f.method,Cv=f.extend({create:kz({method:"POST",fullPath:"/v2/billing/meter_events"})})});var P1,gv;var iv=v(()=>{M();P1=f.method,gv=f.extend({create:P1({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:P1({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:P1({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:P1({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:P1({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:P1({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:P1({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})})});var UP,qv;var Ev=v(()=>{M();UP=f.method,qv=f.extend({create:UP({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:UP({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:UP({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:UP({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:UP({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})})});var RT,Vv;var bv=v(()=>{M();RT=f.method,Vv=f.extend({update:RT({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:RT({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:RT({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:RT({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})})});var wT,Dv;var kv=v(()=>{M();wT=f.method,Dv=f.extend({create:wT({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:wT({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:wT({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:wT({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})})});var uT,ov;var yv=v(()=>{M();uT=f.method,ov=f.extend({update:uT({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:uT({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:uT({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:uT({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})})});var CT,pv;var jv=v(()=>{M();CT=f.method,pv=f.extend({create:CT({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:CT({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:CT({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:CT({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})})});var Y_,nv;var tv=v(()=>{M();Y_=f.method,nv=f.extend({activate:Y_({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:Y_({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:Y_({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})})});var xT,rv;var av=v(()=>{M();xT=f.method,rv=f.extend({create:xT({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:xT({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:xT({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:xT({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})})});var sv,ev;var h2=v(()=>{M();sv=f.method,ev=f.extend({retrieve:sv({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:sv({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})})});var P2,T2;var m2=v(()=>{M();P2=f.method,T2=f.extend({retrieve:P2({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:P2({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})})});var oz,_2;var f2=v(()=>{M();oz=f.method,_2=f.extend({presentPaymentMethod:oz({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})})});var Uh,G2;var O2=v(()=>{M();Uh=f.method,G2=f.extend({create:Uh({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:Uh({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:Uh({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:Uh({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:Uh({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:Uh({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:Uh({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:Uh({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:Uh({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:Uh({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})})});var yz,l2;var v2=v(()=>{M();yz=f.method,l2=f.extend({create:yz({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})})});var z2,Z2;var Q2=v(()=>{M();z2=f.method,Z2=f.extend({retrieve:z2({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:z2({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})})});var pz,J2;var X2=v(()=>{M();pz=f.method,J2=f.extend({create:pz({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})})});var M2,L2;var c2=v(()=>{M();M2=f.method,L2=f.extend({retrieve:M2({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:M2({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})})});var jz,Y2;var F2=v(()=>{M();jz=f.method,Y2=f.extend({expire:jz({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})})});var gT,d2;var U2=v(()=>{M();gT=f.method,d2=f.extend({create:gT({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:gT({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:gT({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:gT({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})})});var F_,W2;var B2=v(()=>{M();F_=f.method,W2=f.extend({create:F_({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:F_({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:F_({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})})});var S2,N2;var K2=v(()=>{M();S2=f.method,N2=f.extend({retrieve:S2({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:S2({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})})});var d_,A2;var $2=v(()=>{M();d_=f.method,A2=f.extend({create:d_({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:d_({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:d_({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})})});var H2,I2;var R2=v(()=>{M();H2=f.method,I2=f.extend({retrieve:H2({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:H2({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})})});var iT,w2;var u2=v(()=>{M();iT=f.method,w2=f.extend({create:iT({method:"POST",fullPath:"/v1/apps/secrets"}),list:iT({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:iT({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:iT({method:"GET",fullPath:"/v1/apps/secrets/find"})})});var nz,C2;var x2=v(()=>{M();nz=f.method,C2=f.extend({create:nz({method:"POST",fullPath:"/v1/billing_portal/sessions"})})});var N1,g2;var i2=v(()=>{M();N1=f.method,g2=f.extend({create:N1({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:N1({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:N1({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:N1({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:N1({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:N1({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})})});var q2,E2;var V2=v(()=>{M();q2=f.method,E2=f.extend({create:q2({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:q2({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})})});var b2,D2;var k2=v(()=>{M();b2=f.method,D2=f.extend({retrieve:b2({method:"GET",fullPath:"/v1/tax/settings"}),update:b2({method:"POST",fullPath:"/v1/tax/settings"})})});var o2,y2;var p2=v(()=>{M();o2=f.method,y2=f.extend({retrieve:o2({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:o2({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})})});var WP,j2;var n2=v(()=>{M();WP=f.method,j2=f.extend({create:WP({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:WP({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:WP({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:WP({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:WP({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})})});var U_,t2;var r2=v(()=>{M();U_=f.method,t2=f.extend({retrieve:U_({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:U_({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:U_({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})})});var a2,s2;var e2=v(()=>{M();a2=f.method,s2=f.extend({retrieve:a2({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:a2({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})})});var W_,h4;var P4=v(()=>{M();W_=f.method,h4=f.extend({createForceCapture:W_({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:W_({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:W_({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})})});var T4,m4;var _4=v(()=>{M();T4=f.method,m4=f.extend({retrieve:T4({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:T4({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})})});var B_,f4;var G4=v(()=>{M();B_=f.method,f4=f.extend({retrieve:B_({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:B_({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:B_({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})})});var qT,O4;var l4=v(()=>{M();qT=f.method,O4=f.extend({retrieve:qT({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:qT({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:qT({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:qT({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})})});var v4,z4;var Z4=v(()=>{M();v4=f.method,z4=f.extend({retrieve:v4({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:v4({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})})});var ET,Q4;var J4=v(()=>{M();ET=f.method,Q4=f.extend({create:ET({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:ET({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:ET({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:ET({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})})});var BP,X4;var M4=v(()=>{M();BP=f.method,X4=f.extend({create:BP({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:BP({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:BP({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:BP({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:BP({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})})});var L4,c4;var Y4=v(()=>{M();L4=f.method,c4=f.extend({retrieve:L4({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:L4({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})})});var K1,F4;var d4=v(()=>{M();K1=f.method,F4=f.extend({create:K1({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:K1({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:K1({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:K1({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:K1({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:K1({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})})});var E,S_;var N_=v(()=>{M();E=f.method,S_=f.extend({create:E({method:"POST",fullPath:"/v1/accounts"}),retrieve(h,...P){if(typeof h==="string")return E({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[h,...P]);else{if(h===null||h===void 0)[].shift.apply([h,...P]);return E({method:"GET",fullPath:"/v1/account"}).apply(this,[h,...P])}},update:E({method:"POST",fullPath:"/v1/accounts/{account}"}),list:E({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:E({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:E({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:E({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:E({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:E({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:E({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:E({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:E({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:E({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:E({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:E({method:"GET",fullPath:"/v1/account"}),retrieveCapability:E({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:E({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:E({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:E({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:E({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:E({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})})});var tz,U4;var W4=v(()=>{M();tz=f.method,U4=f.extend({create:tz({method:"POST",fullPath:"/v1/account_links"})})});var rz,B4;var S4=v(()=>{M();rz=f.method,B4=f.extend({create:rz({method:"POST",fullPath:"/v1/account_sessions"})})});var VT,N4;var K4=v(()=>{M();VT=f.method,N4=f.extend({create:VT({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:VT({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:VT({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:VT({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})})});var A1,A4;var $4=v(()=>{M();A1=f.method,A4=f.extend({retrieve:A1({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:A1({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:A1({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:A1({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:A1({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:A1({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})})});var az,H4;var I4=v(()=>{M();az=f.method,H4=f.extend({retrieve:az({method:"GET",fullPath:"/v1/balance"})})});var R4,w4;var u4=v(()=>{M();R4=f.method,w4=f.extend({retrieve:R4({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:R4({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})})});var $1,C4;var x4=v(()=>{M();$1=f.method,C4=f.extend({create:$1({method:"POST",fullPath:"/v1/charges"}),retrieve:$1({method:"GET",fullPath:"/v1/charges/{charge}"}),update:$1({method:"POST",fullPath:"/v1/charges/{charge}"}),list:$1({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:$1({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:$1({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})})});var sz,g4;var i4=v(()=>{M();sz=f.method,g4=f.extend({retrieve:sz({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})})});var q4,E4;var V4=v(()=>{M();q4=f.method,E4=f.extend({retrieve:q4({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:q4({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})})});var SP,b4;var D4=v(()=>{M();SP=f.method,b4=f.extend({create:SP({method:"POST",fullPath:"/v1/coupons"}),retrieve:SP({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:SP({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:SP({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:SP({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})})});var Eh,k4;var o4=v(()=>{M();Eh=f.method,k4=f.extend({create:Eh({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:Eh({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:Eh({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:Eh({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:Eh({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:Eh({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:Eh({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:Eh({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})})});var ez,y4;var p4=v(()=>{M();ez=f.method,y4=f.extend({create:ez({method:"POST",fullPath:"/v1/customer_sessions"})})});var R,j4;var n4=v(()=>{M();R=f.method,j4=f.extend({create:R({method:"POST",fullPath:"/v1/customers"}),retrieve:R({method:"GET",fullPath:"/v1/customers/{customer}"}),update:R({method:"POST",fullPath:"/v1/customers/{customer}"}),list:R({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:R({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:R({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:R({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:R({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:R({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:R({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:R({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:R({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:R({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:R({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:R({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:R({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:R({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:R({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:R({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:R({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:R({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:R({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:R({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:R({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:R({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:R({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:R({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:R({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})})});var bT,t4;var r4=v(()=>{M();bT=f.method,t4=f.extend({retrieve:bT({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:bT({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:bT({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:bT({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})})});var a4,s4;var e4=v(()=>{M();a4=f.method,s4=f.extend({create:a4({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(h,P)=>{if(!P.headers||!P.headers["Stripe-Version"])throw Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:a4({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})})});var h6,P6;var T6=v(()=>{M();h6=f.method,P6=f.extend({retrieve:h6({method:"GET",fullPath:"/v1/events/{id}"}),list:h6({method:"GET",fullPath:"/v1/events",methodType:"list"})})});var m6,_6;var f6=v(()=>{M();m6=f.method,_6=f.extend({retrieve:m6({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:m6({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})})});var DT,G6;var O6=v(()=>{M();DT=f.method,G6=f.extend({create:DT({method:"POST",fullPath:"/v1/file_links"}),retrieve:DT({method:"GET",fullPath:"/v1/file_links/{link}"}),update:DT({method:"POST",fullPath:"/v1/file_links/{link}"}),list:DT({method:"GET",fullPath:"/v1/file_links",methodType:"list"})})});function l6(h,P,T,m){if(P=P||{},h!=="POST")return m(null,gh(P));this._stripe._platformFunctions.tryBufferData(P).then((_)=>{let G=hZ(h,_,T);return m(null,G)}).catch((_)=>m(_,null))}var hZ=(h,P,T)=>{let m=(Math.round(Math.random()*10000000000000000)+Math.round(Math.random()*10000000000000000)).toString();T["Content-Type"]=`multipart/form-data; boundary=${m}`;let _=new TextEncoder,G=new Uint8Array(0),l=_.encode(`\r
`);function z(Z){let J=G,Q=Z instanceof Uint8Array?Z:new Uint8Array(_.encode(Z));G=new Uint8Array(J.length+Q.length+2),G.set(J),G.set(Q,J.length),G.set(l,G.length-2)}function X(Z){return`"${Z.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}let L=fl(P);for(let Z in L){if(!Object.prototype.hasOwnProperty.call(L,Z))continue;let J=L[Z];if(z(`--${m}`),Object.prototype.hasOwnProperty.call(J,"data")){let Q=J;z(`Content-Disposition: form-data; name=${X(Z)}; filename=${X(Q.name||"blob")}`),z(`Content-Type: ${Q.type||"application/octet-stream"}`),z(""),z(Q.data)}else z(`Content-Disposition: form-data; name=${X(Z)}`),z(""),z(J)}return z(`--${m}--`),G};var v6=v(()=>{ih()});var K_,z6;var Z6=v(()=>{v6();M();K_=f.method,z6=f.extend({create:K_({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:K_({method:"GET",fullPath:"/v1/files/{file}"}),list:K_({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:l6})});var NP,Q6;var J6=v(()=>{M();NP=f.method,Q6=f.extend({create:NP({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:NP({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:NP({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:NP({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:NP({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})})});var kT,X6;var M6=v(()=>{M();kT=f.method,X6=f.extend({retrieve:kT({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:kT({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:kT({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:kT({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})})});var o,L6;var c6=v(()=>{M();o=f.method,L6=f.extend({create:o({method:"POST",fullPath:"/v1/invoices"}),retrieve:o({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:o({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:o({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:o({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:o({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),createPreview:o({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:o({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:o({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:o({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:o({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:o({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:o({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),retrieveUpcoming:o({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:o({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:o({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:o({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:o({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:o({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})})});var PZ,Y6;var F6=v(()=>{M();PZ=f.method,Y6=f.extend({retrieve:PZ({method:"GET",fullPath:"/v1/mandates/{mandate}"})})});var d6,A_="connect.stripe.com",U6;var W6=v(()=>{M();ih();d6=f.method,U6=f.extend({basePath:"/",authorizeUrl(h,P){h=h||{},P=P||{};let T="oauth/authorize";if(P.express)T=`express/${T}`;if(!h.response_type)h.response_type="code";if(!h.client_id)h.client_id=this._stripe.getClientId();if(!h.scope)h.scope="read_write";return`https://${A_}/${T}?${gh(h)}`},token:d6({method:"POST",path:"oauth/token",host:A_}),deauthorize(h,...P){if(!h.client_id)h.client_id=this._stripe.getClientId();return d6({method:"POST",path:"oauth/deauthorize",host:A_}).apply(this,[h,...P])}})});var lh,B6;var S6=v(()=>{M();lh=f.method,B6=f.extend({create:lh({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:lh({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:lh({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:lh({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:lh({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:lh({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:lh({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:lh({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:lh({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:lh({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:lh({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})})});var KP,N6;var K6=v(()=>{M();KP=f.method,N6=f.extend({create:KP({method:"POST",fullPath:"/v1/payment_links"}),retrieve:KP({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:KP({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:KP({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:KP({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})})});var oT,A6;var $6=v(()=>{M();oT=f.method,A6=f.extend({create:oT({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:oT({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:oT({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:oT({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})})});var AP,H6;var I6=v(()=>{M();AP=f.method,H6=f.extend({create:AP({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:AP({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:AP({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:AP({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:AP({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})})});var H1,R6;var w6=v(()=>{M();H1=f.method,R6=f.extend({create:H1({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:H1({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:H1({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:H1({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:H1({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:H1({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})})});var I1,u6;var C6=v(()=>{M();I1=f.method,u6=f.extend({create:I1({method:"POST",fullPath:"/v1/payouts"}),retrieve:I1({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:I1({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:I1({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:I1({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:I1({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})})});var $P,x6;var g6=v(()=>{M();$P=f.method,x6=f.extend({create:$P({method:"POST",fullPath:"/v1/plans"}),retrieve:$P({method:"GET",fullPath:"/v1/plans/{plan}"}),update:$P({method:"POST",fullPath:"/v1/plans/{plan}"}),list:$P({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:$P({method:"DELETE",fullPath:"/v1/plans/{plan}"})})});var HP,i6;var q6=v(()=>{M();HP=f.method,i6=f.extend({create:HP({method:"POST",fullPath:"/v1/prices"}),retrieve:HP({method:"GET",fullPath:"/v1/prices/{price}"}),update:HP({method:"POST",fullPath:"/v1/prices/{price}"}),list:HP({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:HP({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})})});var Wh,E6;var V6=v(()=>{M();Wh=f.method,E6=f.extend({create:Wh({method:"POST",fullPath:"/v1/products"}),retrieve:Wh({method:"GET",fullPath:"/v1/products/{id}"}),update:Wh({method:"POST",fullPath:"/v1/products/{id}"}),list:Wh({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:Wh({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:Wh({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:Wh({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:Wh({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:Wh({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:Wh({method:"GET",fullPath:"/v1/products/search",methodType:"search"})})});var yT,b6;var D6=v(()=>{M();yT=f.method,b6=f.extend({create:yT({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:yT({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:yT({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:yT({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})})});var Bh,k6;var o6=v(()=>{M();Bh=f.method,k6=f.extend({create:Bh({method:"POST",fullPath:"/v1/quotes"}),retrieve:Bh({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:Bh({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:Bh({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:Bh({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:Bh({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:Bh({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:Bh({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:Bh({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:Bh({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})})});var IP,y6;var p6=v(()=>{M();IP=f.method,y6=f.extend({create:IP({method:"POST",fullPath:"/v1/refunds"}),retrieve:IP({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:IP({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:IP({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:IP({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})})});var $_,j6;var n6=v(()=>{M();$_=f.method,j6=f.extend({retrieve:$_({method:"GET",fullPath:"/v1/reviews/{review}"}),list:$_({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:$_({method:"POST",fullPath:"/v1/reviews/{review}/approve"})})});var TZ,t6;var r6=v(()=>{M();TZ=f.method,t6=f.extend({list:TZ({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})})});var T1,a6;var s6=v(()=>{M();T1=f.method,a6=f.extend({create:T1({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:T1({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:T1({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:T1({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:T1({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:T1({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:T1({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})})});var pT,e6;var h8=v(()=>{M();pT=f.method,e6=f.extend({create:pT({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:pT({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:pT({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:pT({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})})});var RP,P8;var T8=v(()=>{M();RP=f.method,P8=f.extend({create:RP({method:"POST",fullPath:"/v1/sources"}),retrieve:RP({method:"GET",fullPath:"/v1/sources/{source}"}),update:RP({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:RP({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:RP({method:"POST",fullPath:"/v1/sources/{source}/verify"})})});var m1,m8;var _8=v(()=>{M();m1=f.method,m8=f.extend({create:m1({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:m1({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:m1({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:m1({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:m1({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:m1({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:m1({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})})});var R1,f8;var G8=v(()=>{M();R1=f.method,f8=f.extend({create:R1({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:R1({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:R1({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:R1({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:R1({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:R1({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})})});var Vh,O8;var l8=v(()=>{M();Vh=f.method,O8=f.extend({create:Vh({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:Vh({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:Vh({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:Vh({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:Vh({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:Vh({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:Vh({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:Vh({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})})});var v8,z8;var Z8=v(()=>{M();v8=f.method,z8=f.extend({retrieve:v8({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:v8({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})})});var jT,Q8;var J8=v(()=>{M();jT=f.method,Q8=f.extend({create:jT({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:jT({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:jT({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:jT({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})})});var nT,X8;var M8=v(()=>{M();nT=f.method,X8=f.extend({create:nT({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:nT({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:nT({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:nT({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})})});var L8,c8;var Y8=v(()=>{M();L8=f.method,c8=f.extend({create:L8({method:"POST",fullPath:"/v1/tokens"}),retrieve:L8({method:"GET",fullPath:"/v1/tokens/{token}"})})});var wP,F8;var d8=v(()=>{M();wP=f.method,F8=f.extend({create:wP({method:"POST",fullPath:"/v1/topups"}),retrieve:wP({method:"GET",fullPath:"/v1/topups/{topup}"}),update:wP({method:"POST",fullPath:"/v1/topups/{topup}"}),list:wP({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:wP({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})})});var bh,U8;var W8=v(()=>{M();bh=f.method,U8=f.extend({create:bh({method:"POST",fullPath:"/v1/transfers"}),retrieve:bh({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:bh({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:bh({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:bh({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:bh({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:bh({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:bh({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})})});var uP,B8;var S8=v(()=>{M();uP=f.method,B8=f.extend({create:uP({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:uP({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:uP({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:uP({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:uP({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})})});var w1={};Dh(w1,{WebhookEndpoints:()=>B8,V2:()=>dZ,Treasury:()=>FZ,Transfers:()=>U8,Topups:()=>F8,Tokens:()=>c8,TestHelpers:()=>YZ,Terminal:()=>cZ,TaxRates:()=>X8,TaxIds:()=>Q8,TaxCodes:()=>z8,Tax:()=>LZ,Subscriptions:()=>O8,SubscriptionSchedules:()=>f8,SubscriptionItems:()=>m8,Sources:()=>P8,Sigma:()=>MZ,ShippingRates:()=>e6,SetupIntents:()=>a6,SetupAttempts:()=>t6,Reviews:()=>j6,Reporting:()=>XZ,Refunds:()=>y6,Radar:()=>JZ,Quotes:()=>k6,PromotionCodes:()=>b6,Products:()=>E6,Prices:()=>i6,Plans:()=>x6,Payouts:()=>u6,PaymentMethods:()=>R6,PaymentMethodDomains:()=>H6,PaymentMethodConfigurations:()=>A6,PaymentLinks:()=>N6,PaymentIntents:()=>B6,OAuth:()=>U6,Mandates:()=>Y6,Issuing:()=>QZ,Invoices:()=>L6,InvoiceRenderingTemplates:()=>X6,InvoiceItems:()=>Q6,Identity:()=>ZZ,Forwarding:()=>zZ,FinancialConnections:()=>vZ,Files:()=>z6,FileLinks:()=>G6,ExchangeRates:()=>_6,Events:()=>P6,EphemeralKeys:()=>s4,Entitlements:()=>lZ,Disputes:()=>t4,Customers:()=>j4,CustomerSessions:()=>y4,CreditNotes:()=>k4,Coupons:()=>b4,CountrySpecs:()=>E4,ConfirmationTokens:()=>g4,Climate:()=>OZ,Checkout:()=>GZ,Charges:()=>C4,BillingPortal:()=>fZ,Billing:()=>_Z,BalanceTransactions:()=>w4,Balance:()=>H4,Apps:()=>mZ,ApplicationFees:()=>A4,ApplePayDomains:()=>N4,Accounts:()=>S_,AccountSessions:()=>B4,AccountLinks:()=>U4,Account:()=>S_});var mZ,_Z,fZ,GZ,OZ,lZ,vZ,zZ,ZZ,QZ,JZ,XZ,MZ,LZ,cZ,YZ,FZ,dZ;var N8=v(()=>{dl();Bl();Nl();Al();Hl();Rl();ul();xl();il();El();bl();kl();yl();jl();rl();sl();hv();Tv();_v();Gv();vv();Zv();Jv();Mv();cv();Fv();Uv();Bv();Nv();Av();Hv();Rv();uv();xv();iv();Ev();bv();kv();yv();jv();tv();av();h2();m2();f2();O2();v2();Q2();X2();c2();F2();U2();B2();K2();$2();R2();u2();x2();i2();V2();k2();p2();n2();r2();e2();P4();_4();G4();l4();Z4();J4();M4();Y4();d4();N_();W4();S4();N_();K4();$4();I4();u4();x4();i4();V4();D4();o4();p4();n4();r4();e4();T6();f6();O6();Z6();J6();M6();c6();F6();W6();S6();K6();$6();I6();w6();C6();g6();q6();V6();D6();o6();p6();n6();r6();s6();h8();T8();_8();G8();l8();Z8();J8();M8();Y8();d8();W8();S8();mZ=x("apps",{Secrets:w2}),_Z=x("billing",{Alerts:Sl,CreditBalanceSummary:pl,CreditBalanceTransactions:tl,CreditGrants:al,MeterEventAdjustments:Sv,MeterEvents:wv,Meters:gv}),fZ=x("billingPortal",{Configurations:ql,Sessions:C2}),GZ=x("checkout",{Sessions:g2}),OZ=x("climate",{Orders:qv,Products:T2,Suppliers:y2}),lZ=x("entitlements",{ActiveEntitlements:Wl,Features:Xv}),vZ=x("financialConnections",{Accounts:Fl,Sessions:E2,Transactions:m4}),zZ=x("forwarding",{Requests:A2}),ZZ=x("identity",{VerificationReports:c4,VerificationSessions:F4}),QZ=x("issuing",{Authorizations:$l,Cardholders:wl,Cards:gl,Disputes:fv,PersonalizationDesigns:rv,PhysicalBundles:ev,Tokens:t2,Transactions:f4}),JZ=x("radar",{EarlyFraudWarnings:lv,ValueListItems:Q4,ValueLists:X4}),XZ=x("reporting",{ReportRuns:W2,ReportTypes:N2}),MZ=x("sigma",{ScheduledQueryRuns:I2}),LZ=x("tax",{Calculations:Il,Registrations:d2,Settings:D2,Transactions:O4}),cZ=x("terminal",{Configurations:Vl,ConnectionTokens:ol,Locations:Wv,Readers:G2}),YZ=x("testHelpers",{ConfirmationTokens:Dl,Customers:Pv,Refunds:Y2,TestClocks:j2,Issuing:x("issuing",{Authorizations:Kl,Cards:Cl,PersonalizationDesigns:nv,Transactions:h4}),Terminal:x("terminal",{Readers:_2}),Treasury:x("treasury",{InboundTransfers:Yv,OutboundPayments:Vv,OutboundTransfers:ov,ReceivedCredits:l2,ReceivedDebits:J2})}),FZ=x("treasury",{CreditReversals:el,DebitReversals:mv,FinancialAccounts:Lv,InboundTransfers:dv,OutboundPayments:Dv,OutboundTransfers:pv,ReceivedCredits:Z2,ReceivedDebits:L2,TransactionEntries:s2,Transactions:z4}),dZ=x("v2",{Billing:x("billing",{MeterEventAdjustments:Kv,MeterEventSession:$v,MeterEventStream:Iv,MeterEvents:Cv}),Core:x("core",{EventDestinations:zv,Events:Qv})})});function C8(h,P=WZ){m.PACKAGE_VERSION="17.7.0",m.USER_AGENT=Object.assign({bindings_version:m.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},Gl()),m.StripeResource=f,m.resources=w1,m.HttpClient=j,m.HttpClientResponse=t1,m.CryptoProvider=a1;function T(_=h){return Q_(_)}m.webhooks=Object.assign(T,Q_(h));function m(_,G={}){if(!(this instanceof m))return new m(_,G);let l=this._getPropsFromConfig(G);this._platformFunctions=h,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=m.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);let z=l.httpAgent||null;this._api={host:l.host||K8,port:l.port||A8,protocol:l.protocol||"https",basePath:$8,version:l.apiVersion||H8,timeout:NT("timeout",l.timeout,I8),maxNetworkRetries:NT("maxNetworkRetries",l.maxNetworkRetries,2),agent:z,httpClient:l.httpClient||(z?this._platformFunctions.createNodeHttpClient(z):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:l.stripeAccount||null,stripeContext:l.stripeContext||null};let X=l.typescript||!1;if(X!==m.USER_AGENT.typescript)m.USER_AGENT.typescript=X;if(l.appInfo)this._setAppInfo(l.appInfo);this._prepResources(),this._setAuthenticator(_,l.authenticator),this.errors=TT,this.webhooks=T(),this._prevRequestMetrics=[],this._enableTelemetry=l.telemetry!==!1,this._requestSender=P(this),this.StripeResource=m.StripeResource}return m.errors=TT,m.createNodeHttpClient=h.createNodeHttpClient,m.createFetchHttpClient=h.createFetchHttpClient,m.createNodeCryptoProvider=h.createNodeCryptoProvider,m.createSubtleCryptoProvider=h.createSubtleCryptoProvider,m.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(_,G,l,z){return this._requestSender._rawRequest(_,G,l,z)},_setAuthenticator(_,G){if(_&&G)throw Error("Can't specify both apiKey and authenticator");if(!_&&!G)throw Error("Neither apiKey nor config.authenticator provided");this._authenticator=_?UT(_):G},_setAppInfo(_){if(_&&typeof _!=="object")throw Error("AppInfo must be an object.");if(_&&!_.name)throw Error("AppInfo.name is required");_=_||{},this._appInfo=UZ.reduce((G,l)=>{if(typeof _[l]=="string")G=G||{},G[l]=_[l];return G},void 0)},_setApiField(_,G){this._api[_]=G},getApiField(_){return this._api[_]},setClientId(_){this._clientId=_},getClientId(){return this._clientId},getConstant:(_)=>{switch(_){case"DEFAULT_HOST":return K8;case"DEFAULT_PORT":return A8;case"DEFAULT_BASE_PATH":return $8;case"DEFAULT_API_VERSION":return H8;case"DEFAULT_TIMEOUT":return I8;case"MAX_NETWORK_RETRY_DELAY_SEC":return R8;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return w8}return m[_]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(_,G,l){let z=NT(_,G,l);this._setApiField(_,z)},getMaxNetworkRetryDelay(){return R8},getInitialNetworkRetryDelay(){return w8},getClientUserAgent(_){return this.getClientUserAgentSeeded(m.USER_AGENT,_)},getClientUserAgentSeeded(_,G){this._platformFunctions.getUname().then((l)=>{var z;let X={};for(let Z in _){if(!Object.prototype.hasOwnProperty.call(_,Z))continue;X[Z]=encodeURIComponent((z=_[Z])!==null&&z!==void 0?z:"null")}X.uname=encodeURIComponent(l||"UNKNOWN");let L=this.getApiField("httpClient");if(L)X.httplib=encodeURIComponent(L.getClientName());if(this._appInfo)X.application=this._appInfo;G(JSON.stringify(X))})},getAppInfoAsString(){if(!this._appInfo)return"";let _=this._appInfo.name;if(this._appInfo.version)_+=`/${this._appInfo.version}`;if(this._appInfo.url)_+=` (${this._appInfo.url})`;return _},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(let _ in w1){if(!Object.prototype.hasOwnProperty.call(w1,_))continue;this[_l(_)]=new w1[_](this)}},_getPropsFromConfig(_){if(!_)return{};let G=typeof _==="string";if(!(_===Object(_)&&!Array.isArray(_))&&!G)throw Error("Config must either be an object or a string");if(G)return{apiVersion:_};if(Object.keys(_).filter((X)=>!u8.includes(X)).length>0)throw Error(`Config object may only contain the following: ${u8.join(", ")}`);return _},parseThinEvent(_,G,l,z,X,L){return this.webhooks.constructEvent(_,G,l,z,X,L)}},m}var K8="api.stripe.com",A8="443",$8="/v1/",H8,I8=80000,R8=5,w8=0.5,UZ,u8,WZ=(h)=>new W1(h,f.MAX_BUFFERED_REQUEST_METRICS);var x8=v(()=>{mT();ll();M();cl();sP();aP();N8();ih();H8=Yl,UZ=["name","version","url","partner_id"],u8=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"]});var i8={};Dh(i8,{default:()=>BZ,Stripe:()=>g8});var g8,BZ;var q8=v(()=>{k0();x8();g8=C8(new Sm),BZ=g8});var SZ,E8=async(h)=>{try{return await h()}catch{return null}},NZ=async(h)=>{let P=await V8();if(!P)return null;return E8(()=>h(P))},KZ,AZ=async(h)=>{let P=KZ(),T=await SZ();return P?new T(h,P):new T(h)},$Z,HZ,V8=async()=>{let h=await mm();if(!h)return null;try{let T=$Z();if(T.secretKey===h)return T.client}catch{}let P=await AZ(h);return HZ({client:P,secretKey:h}),P},b8=async(h,P,T,m=1)=>{let _=await V8();if(!_||h.unit_price===null)return null;let G=(await zf()).toLowerCase(),l=`${T}/payment/success?attendee_id=${P.id}&session_id={CHECKOUT_SESSION_ID}`,z=`${T}/payment/cancel?attendee_id=${P.id}&session_id={CHECKOUT_SESSION_ID}`,X=m>1?`${m} Tickets`:"Ticket";return E8(()=>_.checkout.sessions.create({payment_method_types:["card"],line_items:[{price_data:{currency:G,product_data:{name:h.name,description:`${X} for ${h.name}`},unit_amount:h.unit_price},quantity:m}],mode:"payment",success_url:l,cancel_url:z,customer_email:P.email,metadata:{attendee_id:String(P.id),event_id:String(h.id),quantity:String(m)}}))},H_=async(h)=>NZ((P)=>P.checkout.sessions.retrieve(h));var I_=v(()=>{b1();SZ=zh(async()=>{let{default:h}=await Promise.resolve().then(() => (q8(),i8));return h}),KZ=zh(()=>{let h=process.env.STRIPE_MOCK_HOST;if(!h)return;let P=Number.parseInt(process.env.STRIPE_MOCK_PORT||"12111",10);return{host:h,port:P,protocol:"http"}}),[$Z,HZ]=Nh(()=>{throw Error("Stripe cache not initialized")})});var IZ=async(h,P,T,m,_,G)=>{let l={event_type:"attendee.registered",event_id:P,event_name:T,attendee:{name:m,email:_,quantity:G},timestamp:new Date().toISOString()};try{await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}catch{}},tT=async(h,P)=>{if(!h.webhook_url)return;await IZ(h.webhook_url,h.id,h.name,P.name,P.email,P.quantity)};var p8={};Dh(p8,{routeTicket:()=>EZ,handleTicketPost:()=>y8,handleTicketGet:()=>o8,handleHome:()=>RZ});var RZ=()=>{return $(uf())},wZ=(h)=>`/ticket/${h}`,k8=(h)=>(P)=>(T,m=200)=>tP(Vf(P,wZ(h.id)))(Om(h,P,T),m),R_=(h,P)=>(T,m=400)=>$(Om(h,P,T),m),o8=(h)=>z1(h,(P)=>{let T=fh();return k8(P)(T)()}),uZ=async(h)=>{return await vf()&&h.unit_price!==null&&h.unit_price>0},CZ=async(h,P,T,m,_)=>{let G=qf(h),l=await b8(P,T,G,m);if(l?.url)return C(l.url);return await J1(T.id),R_(P,_)("Failed to create payment session. Please try again.",500)},xZ=(h,P)=>{let T=h.get("quantity")||"1",m=Number.parseInt(T,10);if(Number.isNaN(m)||m<1)return 1;return Math.min(m,P.max_quantity)},gZ=(h)=>(P)=>k8(h)(P)("Invalid or expired form. Please try again.",403),iZ=async(h,P)=>{let m=l1(h).get("csrf_token")||fh(),_=await bf(h,gZ(P));if(!_.ok)return _.response;let{form:G}=_,l=Oh(G,oP);if(!l.valid)return R_(P,m)(l.error);let z=xZ(G,P);if(!await pf(P.id,z))return R_(P,m)("Sorry, not enough spots available");let{values:L}=l,Z=await of(P.id,L.name,L.email,null,z);if(await uZ(P))return CZ(h,P,Z,z,m);return await tT(P,Z),C(P.thank_you_url)},y8=(h,P)=>z1(P,(T)=>iZ(h,T)),D8=(h)=>Number.parseInt(h.id??"0",10),qZ,EZ;var j8=v(()=>{b1();y1();hh();I_();Th();Ph();lm();qZ=b({"GET /ticket/:id":(h,P)=>o8(D8(P)),"POST /ticket/:id":(h,P)=>y8(h,D8(P))}),EZ=Jh(qZ)});var w_=(h,P)=>String(O(u,{title:"Setup",children:[O("header",{children:[O("h1",{children:"Initial Setup"},void 0,!1,void 0,this),O("p",{children:"Welcome! Please configure your ticket reservation system."},void 0,!1,void 0,this)]},void 0,!0,void 0,this),O("section",{children:[O(I,{html:Rh(h)},void 0,!1,void 0,this),O("form",{method:"POST",action:"/setup/",children:[P&&O("input",{type:"hidden",name:"csrf_token",value:P},void 0,!1,void 0,this),O(I,{html:r(yP,{currency_code:"GBP"})},void 0,!1,void 0,this),O("button",{type:"submit",children:"Complete Setup"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)),n8=()=>String(O(u,{title:"Setup Complete",children:[O("header",{children:O("h1",{children:"Setup Complete!"},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("section",{children:[O("div",{class:"success",children:O("p",{children:"Your ticket reservation system has been configured successfully."},void 0,!1,void 0,this)},void 0,!1,void 0,this),O("p",{children:O("a",{href:"/admin/",children:O("b",{children:"Go to Admin Dashboard"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this));var t8=v(()=>{hh();e();Ph();Xh();g()});var a8={};Dh(a8,{createSetupRouter:()=>oZ});var VZ=(h)=>`setup_csrf=${h}; HttpOnly; Secure; SameSite=Strict; Path=/setup; Max-Age=3600`,r8=(h)=>(P,T=200)=>tP(VZ(h))(w_(P,h),T),bZ=(h)=>{console.log("[Setup] Validating form data..."),console.log("[Setup] Form keys:",Array.from(h.keys()));let P=Oh(h,yP);if(!P.valid)return console.log("[Setup] Form framework validation failed:",P.error),P;let{values:T}=P;console.log("[Setup] Form values received:",{hasPassword:!!T.admin_password,passwordLength:T.admin_password?.length,hasConfirm:!!T.admin_password_confirm,confirmLength:T.admin_password_confirm?.length,currency:T.currency_code,hasStripeKey:!!T.stripe_secret_key});let{admin_password:m,admin_password_confirm:_}=T,G=(T.currency_code||"GBP").toUpperCase();if(m.length<8)return console.log("[Setup] Password too short:",m.length),{valid:!1,error:"Password must be at least 8 characters"};if(m!==_)return console.log("[Setup] Passwords do not match"),{valid:!1,error:"Passwords do not match"};if(!/^[A-Z]{3}$/.test(G))return console.log("[Setup] Invalid currency code:",G),{valid:!1,error:"Currency code must be 3 uppercase letters"};return console.log("[Setup] Validation passed"),{valid:!0,password:m,stripeKey:T.stripe_secret_key||null,currency:G}},DZ=async(h)=>{if(await h())return C("/");let P=fh();return r8(P)()},kZ=async(h,P)=>{if(console.log("[Setup] POST request received"),console.log("[Setup] Request URL:",h.url),await P())return console.log("[Setup] Setup already complete, redirecting"),C("/");let T=l1(h),m=T.get("setup_csrf")||"";console.log("[Setup] Cookie header:",h.headers.get("cookie")),console.log("[Setup] Cookies parsed:",Array.from(T.keys())),console.log("[Setup] Cookie CSRF token present:",!!m,"length:",m.length);let _=await v1(h),G=_.get("csrf_token")||"";if(console.log("[Setup] Form CSRF token present:",!!G,"length:",G.length),console.log("[Setup] CSRF tokens match:",m===G),!m||!G||!nP(m,G)){console.log("[Setup] CSRF validation FAILED");let z=fh();return r8(z)("Invalid or expired form. Please try again.",403)}console.log("[Setup] CSRF validation passed, validating form...");let l=bZ(_);if(!l.valid)return console.log("[Setup] Form validation FAILED:",l.error),$(w_(l.error,G),400);console.log("[Setup] Form validation passed, completing setup...");try{return await _f(l.password,l.stripeKey,l.currency),console.log("[Setup] Setup completed successfully!"),$(n8())}catch(z){throw console.error("[Setup] Error completing setup:",z),z}},oZ=(h)=>{let P=b({"GET /setup":()=>DZ(h),"POST /setup":(T)=>kZ(T,h)});return Jh(P)};var s8=v(()=>{V1();hh();Th();Ph();t8()});var T5={};Dh(T5,{routePayment:()=>TQ});var e8=(h)=>({attendeeId:Zm(h,"attendee_id"),sessionId:Zm(h,"session_id")}),h5=(h)=>(P)=>P.metadata?.attendee_id!==h?Lh("Payment session mismatch. Please contact support."):null,yZ=async(h,P,T)=>{let m=await H_(h);if(!m)return{error:Lh(T)};let _=h5(P)(m);if(_)return{error:_};return{session:m}},pZ=async(h)=>{if(!h)return{success:!1,response:Lh("Invalid payment callback")};let P=await rP(Number.parseInt(h,10));if(!P)return{success:!1,response:Lh("Attendee not found",404)};let T=await Bf(P.event_id);if(!T)return{success:!1,response:Lh("Event not found",404)};return{success:!0,data:{attendee:P,event:T}}},jZ=async(h,P,T,m)=>{let _=await H_(h);if(!_||_.payment_status!=="paid")return Lh("Payment verification failed. Please contact support.");let G=h5(P)(_);if(G)return G;if(!T.stripe_payment_id)await yf(T.id,_.payment_intent),await tT(m,T);return $(Hf(m,m.thank_you_url))},nZ=async(h)=>{let P=e8(h),T=await pZ(P.attendeeId);return T.success?{ok:!0,params:P,data:T.data}:{ok:!1,response:T.response}},tZ=()=>Lh("Invalid payment callback"),rZ=(h)=>h.sessionId?null:tZ(),aZ=(h,P)=>h?h(P):null,P5=(h)=>(P)=>async(T)=>{let m=e8(T),_=aZ(h,m);if(_)return _;let G=await nZ(T);return G.ok?P(G.params,G.data):G.response},sZ,eZ=async(h,P,T)=>{if(!h)return Lh("Invalid payment callback");let m=await yZ(h,P,"Payment session not found. Please contact support.");if("error"in m)return m.error;if(T.stripe_payment_id)return Lh("Cannot cancel a completed payment.");return null},hQ,PQ,TQ;var m5=v(()=>{y1();ph();I_();Th();Gm();sZ=P5(rZ)(async(h,{attendee:P,event:T})=>await jZ(h.sessionId,h.attendeeId,P,T)),hQ=P5(null)(async(h,{attendee:P,event:T})=>{let m=await eZ(h.sessionId,h.attendeeId,P);if(m)return m;return await J1(P.id),$(If(T,`/ticket/${T.id}`))}),PQ=b({"GET /payment/success":(h)=>sZ(h),"GET /payment/cancel":(h)=>hQ(h)}),TQ=Jh(PQ)});g1();import*as f5 from"@bunny.net/edgescript-sdk";Hh();var r_="added csrf_token to sessions",f1=async(h)=>{try{await H().execute(h)}catch{}},B5=async()=>{try{return(await H().execute("SELECT value FROM settings WHERE key = 'latest_db_update'")).rows[0]?.value===r_}catch{return!1}},a_=async()=>{if(await B5())return;let h=H();await h.execute(`
    CREATE TABLE IF NOT EXISTS settings (
      key TEXT PRIMARY KEY,
      value TEXT NOT NULL
    )
  `),await h.execute(`
    CREATE TABLE IF NOT EXISTS events (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      created TEXT NOT NULL,
      name TEXT NOT NULL,
      description TEXT NOT NULL,
      max_attendees INTEGER NOT NULL,
      thank_you_url TEXT NOT NULL,
      unit_price INTEGER
    )
  `),await f1("ALTER TABLE events ADD COLUMN unit_price INTEGER"),await h.execute(`
    CREATE TABLE IF NOT EXISTS attendees (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      event_id INTEGER NOT NULL,
      name TEXT NOT NULL,
      email TEXT NOT NULL,
      created TEXT NOT NULL,
      stripe_payment_id TEXT,
      FOREIGN KEY (event_id) REFERENCES events(id)
    )
  `),await f1("ALTER TABLE attendees ADD COLUMN stripe_payment_id TEXT"),await f1("ALTER TABLE attendees ADD COLUMN quantity INTEGER NOT NULL DEFAULT 1"),await f1("ALTER TABLE events ADD COLUMN max_quantity INTEGER NOT NULL DEFAULT 1"),await f1("ALTER TABLE events ADD COLUMN webhook_url TEXT"),await h.execute(`
    CREATE TABLE IF NOT EXISTS sessions (
      token TEXT PRIMARY KEY,
      csrf_token TEXT NOT NULL,
      expires INTEGER NOT NULL
    )
  `),await f1("ALTER TABLE sessions ADD COLUMN csrf_token TEXT NOT NULL DEFAULT ''"),await h.execute(`
    CREATE TABLE IF NOT EXISTS login_attempts (
      ip TEXT PRIMARY KEY,
      attempts INTEGER NOT NULL DEFAULT 0,
      locked_until INTEGER
    )
  `),await h.execute({sql:"INSERT OR REPLACE INTO settings (key, value) VALUES ('latest_db_update', ?)",args:[r_]})};b1();b1();var w5=Zf(),u5={"x-content-type-options":"nosniff","referrer-policy":"strict-origin-when-cross-origin"},C5=(h)=>{let P=[];if(!h)P.push("frame-ancestors 'none'");return P.push("default-src 'self'"),P.push("style-src 'self' 'unsafe-inline'"),P.push("script-src 'self' 'unsafe-inline'"),P.push("form-action 'self'"),P.join("; ")},D1=(h)=>({...u5,...!h&&{"x-frame-options":"DENY"},"content-security-policy":C5(h)}),qP=(h)=>/^\/ticket\/\d+$/.test(h),x5=(h)=>{let P=h.indexOf(":");return P===-1?h:h.slice(0,P)},EP=(h)=>{let P=h.headers.get("host");if(!P)return!1;return x5(P)===w5},VP=(h)=>{if(h.method!=="POST")return!0;return(h.headers.get("content-type")||"").startsWith("application/x-www-form-urlencoded")},Qf=()=>new Response("Bad Request: Invalid Content-Type",{status:400,headers:{"content-type":"text/plain",...D1(!1)}}),Jf=()=>new Response("Forbidden: Invalid domain",{status:403,headers:{"content-type":"text/plain",...D1(!1)}}),Xf=(h,P)=>{let T=new Headers(h.headers),m=D1(P);for(let[_,G]of Object.entries(m))T.set(_,G);return new Response(h.body,{status:h.status,statusText:h.statusText,headers:T})};var Mf=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="1.5"><path d="M22 8.879c-.067-1.542-.254-2.546-.78-3.34a4.7 4.7 0 0 0-1.109-1.174C18.945 3.5 17.3 3.5 14.008 3.5H9.993c-3.291 0-4.937 0-6.103.865c-.432.32-.807.717-1.11 1.174c-.525.794-.712 1.798-.78 3.34c-.01.263.216.465.465.465c1.386 0 2.51 1.189 2.51 2.656s-1.124 2.656-2.51 2.656c-.249 0-.476.202-.464.466c.067 1.541.254 2.545.78 3.34a4.7 4.7 0 0 0 1.109 1.173c1.166.865 2.812.865 6.103.865h4.015c3.291 0 4.937 0 6.103-.865c.432-.32.807-.717 1.11-1.174c.525-.794.712-1.798.779-3.34z"/><path stroke-linecap="round" d="M13 12h4m-8 4h8"/></g></svg>
`;var Lf=`/* MVP.css v1.17.2 - https://github.com/andybrewer/mvp */

:root {
  --active-brightness: 0.85;
  --border-radius: 5px;
  --box-shadow: 2px 2px 10px;
  --color-accent: #118bee15;
  --color-bg: #fff;
  --color-bg-secondary: #e9e9e9;
  --color-link: #118bee;
  --color-secondary: #920de9;
  --color-secondary-accent: #920de90b;
  --color-shadow: #f4f4f4;
  --color-table: #118bee;
  --color-text: #000;
  --color-text-secondary: #999;
  --color-scrollbar: #cacae8;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  --hover-brightness: 1.2;
  --justify-important: center;
  --justify-normal: left;
  --line-height: 1.5;
  --width-card: 285px;
  --width-card-medium: 460px;
  --width-card-wide: 800px;
  --width-content: 1080px;
}

@media (prefers-color-scheme: dark) {
  :root[color-mode="user"] {
    --color-accent: #0097fc4f;
    --color-bg: #333;
    --color-bg-secondary: #555;
    --color-link: #0097fc;
    --color-secondary: #e20de9;
    --color-secondary-accent: #e20de94f;
    --color-shadow: #bbbbbb20;
    --color-table: #0097fc;
    --color-text: #f7f7f7;
    --color-text-secondary: #aaa;
  }
}

html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}

/* Layout */
article aside {
  background: var(--color-secondary-accent);
  border-left: 4px solid var(--color-secondary);
  padding: 0.01rem 0.8rem;
}

body {
  background: var(--color-bg);
  color: var(--color-text);
  font-family: var(--font-family);
  line-height: var(--line-height);
  margin: 0;
  overflow-x: hidden;
  padding: 0;
}

footer,
header,
main {
  margin: 0 auto;
  max-width: var(--width-content);
  padding: 3rem 1rem;
}

hr {
  background-color: var(--color-bg-secondary);
  border: none;
  height: 1px;
  margin: 4rem 0;
  width: 100%;
}

section {
  display: flex;
  flex-wrap: wrap;
  justify-content: var(--justify-important);
}

section img,
article img {
  max-width: 100%;
}

section pre {
  overflow: auto;
}

section aside {
  border: 1px solid var(--color-bg-secondary);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow) var(--color-shadow);
  margin: 1rem;
  padding: 1.25rem;
  width: var(--width-card);
}

section aside:hover {
  box-shadow: var(--box-shadow) var(--color-bg-secondary);
}

[hidden] {
  display: none;
}

/* Headers */
article header,
div header,
main header {
  padding-top: 0;
}

header {
  text-align: var(--justify-important);
}

header a b,
header a em,
header a i,
header a strong {
  margin-left: 0.5rem;
  margin-right: 0.5rem;
}

header nav img {
  margin: 1rem 0;
}

section header {
  padding-top: 0;
  width: 100%;
}

/* Nav */
nav {
  align-items: center;
  display: flex;
  font-weight: bold;
  justify-content: space-between;
  margin-bottom: 7rem;
}

nav ul {
  list-style: none;
  padding: 0;
}

nav ul li {
  display: inline-block;
  margin: 0 0.5rem;
  position: relative;
  text-align: left;
}

/* Nav Dropdown */
nav ul li:hover ul {
  display: block;
}

nav ul li ul {
  background: var(--color-bg);
  border: 1px solid var(--color-bg-secondary);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow) var(--color-shadow);
  display: none;
  height: auto;
  left: -2px;
  padding: 0.5rem 1rem;
  position: absolute;
  top: 1.7rem;
  white-space: nowrap;
  width: auto;
  z-index: 1;
}

nav ul li ul::before {
  /* fill gap above to make mousing over them easier */
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: -0.5rem;
  height: 0.5rem;
}

nav ul li ul li,
nav ul li ul li a {
  display: block;
}

/* Nav for Mobile */
@media (max-width: 768px) {
  nav {
    flex-wrap: wrap;
  }

  nav ul li {
    width: calc(100% - 1em);
  }

  nav ul li ul {
    border: none;
    box-shadow: none;
    display: block;
    position: static;
  }
}

/* Typography */
code,
samp {
  background-color: var(--color-accent);
  border-radius: var(--border-radius);
  color: var(--color-text);
  display: inline-block;
  margin: 0 0.1rem;
  padding: 0 0.5rem;
}

details {
  margin: 1.3rem 0;
}

details summary {
  font-weight: bold;
  cursor: pointer;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  line-height: var(--line-height);
  text-wrap: balance;
}

mark {
  padding: 0.1rem;
}

ol li,
ul li {
  padding: 0.2rem 0;
}

p {
  margin: 0.75rem 0;
  padding: 0;
  width: 100%;
}

pre {
  margin: 1rem 0;
  max-width: var(--width-card-wide);
  padding: 1rem 0;
}

pre code,
pre samp {
  display: block;
  max-width: var(--width-card-wide);
  padding: 0.5rem 2rem;
  white-space: pre-wrap;
}

small {
  color: var(--color-text-secondary);
}

sup {
  background-color: var(--color-secondary);
  border-radius: var(--border-radius);
  color: var(--color-bg);
  font-size: xx-small;
  font-weight: bold;
  margin: 0.2rem;
  padding: 0.2rem 0.3rem;
  position: relative;
  top: -2px;
}

/* Links */
a {
  color: var(--color-link);
  display: inline-block;
  font-weight: bold;
  text-decoration: underline;
}

a:hover {
  filter: brightness(var(--hover-brightness));
}

a:active {
  filter: brightness(var(--active-brightness));
}

a b,
a em,
a i,
a strong,
button,
input[type="submit"] {
  border-radius: var(--border-radius);
  display: inline-block;
  font-size: medium;
  font-weight: bold;
  line-height: var(--line-height);
  margin: 0.5rem 0;
  padding: 1rem 2rem;
}

button,
input[type="submit"] {
  font-family: var(--font-family);
}

button:hover,
input[type="submit"]:hover {
  cursor: pointer;
  filter: brightness(var(--hover-brightness));
}

button:active,
input[type="submit"]:active {
  filter: brightness(var(--active-brightness));
}

a b,
a strong,
button,
input[type="submit"] {
  background-color: var(--color-link);
  border: 2px solid var(--color-link);
  color: var(--color-bg);
}

a em,
a i {
  border: 2px solid var(--color-link);
  border-radius: var(--border-radius);
  color: var(--color-link);
  display: inline-block;
  padding: 1rem 2rem;
}

article aside a {
  color: var(--color-secondary);
}

/* Images */
figure {
  margin: 0;
  padding: 0;
}

figure img {
  max-width: 100%;
}

figure figcaption {
  color: var(--color-text-secondary);
}

/* Forms */
button:disabled,
input:disabled {
  background: var(--color-bg-secondary);
  border-color: var(--color-bg-secondary);
  color: var(--color-text-secondary);
  cursor: not-allowed;
}

button[disabled]:hover,
input[type="submit"][disabled]:hover {
  filter: none;
}

form {
  border: 1px solid var(--color-bg-secondary);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow) var(--color-shadow);
  display: block;
  max-width: var(--width-card-wide);
  min-width: var(--width-card);
  padding: 1.5rem;
  text-align: var(--justify-normal);
}

form header {
  margin: 1.5rem 0;
  padding: 1.5rem 0;
}

input,
label,
select,
textarea {
  display: block;
  font-size: inherit;
  max-width: var(--width-card-wide);
}

input[type="checkbox"],
input[type="radio"] {
  display: inline-block;
}

input[type="checkbox"] + label,
input[type="radio"] + label {
  display: inline-block;
  font-weight: normal;
  position: relative;
  top: 1px;
}

input[type="range"] {
  padding: 0.4rem 0;
}

input,
select,
textarea {
  border: 1px solid var(--color-bg-secondary);
  border-radius: var(--border-radius);
  margin-bottom: 1rem;
  padding: 0.4rem 0.8rem;
}

input[type="text"],
input[type="password"],
input[type="email"],
textarea {
  width: calc(100% - 1.6rem);
}

input[readonly],
textarea[readonly] {
  background-color: var(--color-bg-secondary);
}

label {
  font-weight: bold;
  margin-bottom: 0.2rem;
}

/* Popups */
dialog {
  max-width: 90%;
  max-height: 85dvh;
  margin: auto;
  padding-block: 0;
  padding-inline: 20px;
  border: 1px solid var(--color-bg-secondary);
  border-radius: 0.5rem;
  overscroll-behavior: contain;
  scroll-behavior: smooth;
  scrollbar-width: none; /* Hide scrollbar for Firefox */
  -ms-overflow-style: none; /* Hide scrollbar for IE and Edge */
  scrollbar-color: transparent transparent;
  animation: bottom-to-top 0.25s ease-in-out forwards;
}

dialog::-webkit-scrollbar {
  width: 0;
  display: none;
}

dialog::-webkit-scrollbar-track {
  background: transparent;
}

dialog::-webkit-scrollbar-thumb {
  background-color: transparent;
}

@media (min-width: 650px) {
  dialog {
    max-width: 39rem;
  }
}

dialog::backdrop {
  background-color: rgba(0, 0, 0, 0.5);
}

@keyframes bottom-to-top {
  0% {
    opacity: 0;
    transform: translateY(10%);
  }

  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

dialog hr {
  margin-block: 1rem;
}

/* Tables */
table {
  border: 1px solid var(--color-bg-secondary);
  border-radius: var(--border-radius);
  border-spacing: 0;
  display: inline-block;
  max-width: 100%;
  overflow-x: auto;
  padding: 0;
  white-space: nowrap;
}

table td,
table th,
table tr {
  padding: 0.4rem 0.8rem;
  text-align: var(--justify-important);
}

table thead {
  background-color: var(--color-table);
  border-collapse: collapse;
  border-radius: var(--border-radius);
  color: var(--color-bg);
  margin: 0;
  padding: 0;
}

table thead tr:first-child th:first-child {
  border-top-left-radius: var(--border-radius);
}

table thead tr:first-child th:last-child {
  border-top-right-radius: var(--border-radius);
}

table thead th:first-child,
table tr td:first-child {
  text-align: var(--justify-normal);
}

table tr:nth-child(even) {
  background-color: var(--color-accent);
}

/* Quotes */
blockquote {
  display: block;
  font-size: x-large;
  line-height: var(--line-height);
  margin: 1rem auto;
  max-width: var(--width-card-medium);
  padding: 1.5rem 1rem;
  text-align: var(--justify-important);
}

blockquote footer {
  color: var(--color-text-secondary);
  display: block;
  font-size: small;
  line-height: var(--line-height);
  padding: 1.5rem 0;
}

/* Scrollbars */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-scrollbar) transparent;
}

*::-webkit-scrollbar {
  width: 5px;
  height: 5px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background-color: var(--color-scrollbar);
  border-radius: 10px;
}

/* App-specific additions */
.error {
  background: #ffeeee;
  border-left: 4px solid #cc0000;
  color: #cc0000;
  padding: 1rem;
  margin-bottom: 1rem;
}

.success {
  background: #eeffee;
  border-left: 4px solid #006600;
  color: #006600;
  padding: 1rem;
  margin-bottom: 1rem;
}

@media (prefers-color-scheme: dark) {
  :root[color-mode="user"] .error {
    background: #442222;
    color: #ff6666;
  }
  :root[color-mode="user"] .success {
    background: #224422;
    color: #66ff66;
  }
}

/* Danger elements */
.danger,
a.danger,
button.danger,
input[type="submit"].danger {
  --color-danger: #cc0000;
  --color-danger-hover: #990000;
  background-color: var(--color-danger);
  border-color: var(--color-danger);
  color: var(--color-bg);
}

a.danger {
  color: var(--color-danger);
  background: transparent;
  border: none;
}

button.danger:hover,
input[type="submit"].danger:hover {
  background-color: var(--color-danger-hover);
  border-color: var(--color-danger-hover);
}

@media (prefers-color-scheme: dark) {
  :root[color-mode="user"] .danger,
  :root[color-mode="user"] a.danger {
    --color-danger: #ff4444;
    --color-danger-hover: #cc0000;
  }
}
`;var cf={"cache-control":"public, max-age=31536000, immutable"},Yf=()=>new Response(Lf,{headers:{"content-type":"text/css; charset=utf-8",...cf}}),Ff=()=>new Response(Mf,{headers:{"content-type":"image/svg+xml",...cf}});var q5=JSON.stringify({status:"ok"}),df=()=>new Response(q5,{headers:{"content-type":"application/json"}});var y5=b({"GET /health":()=>df(),"GET /favicon.ico":()=>Ff(),"GET /mvp.css":()=>Yf()}),Uf=Jh(y5);Th();var mQ=zh(async()=>{let{routeAdmin:h}=await Promise.resolve().then(() => (i0(),g0));return h}),_5=zh(async()=>{let{handleHome:h,routeTicket:P}=await Promise.resolve().then(() => (j8(),p8));return{handleHome:h,routeTicket:P}}),_Q=zh(async()=>{let{createSetupRouter:h}=await Promise.resolve().then(() => (s8(),a8));return h(gP)}),fQ=zh(async()=>{let{routePayment:h}=await Promise.resolve().then(() => (m5(),T5));return h}),GQ=(h,P)=>h===P||h.startsWith(`${P}/`),u_=(h,P)=>async(T,m,_,G)=>{if(!GQ(m,h))return null;return(await P())(T,m,_,G)},OQ=async(h,P,T)=>{if(P!=="/"||T!=="GET")return null;let{handleHome:m}=await _5();return m()},lQ=u_("/admin",mQ),vQ=u_("/ticket",async()=>(await _5()).routeTicket),zQ=u_("/payment",fQ),ZQ=async(h,P,T,m)=>await OQ(h,P,T,m)??await lQ(h,P,T,m)??await vQ(h,P,T,m)??await zQ(h,P,T,m)??Mh(),QQ=async(h,P)=>{let{path:T,method:m}=zm(h),_=await Uf(h,T,m);if(_)return _;if(T==="/setup"||T.startsWith("/setup/")){let l=await(await _Q())(h,T,m);if(l)return l}if(!await gP())return C("/setup");return await ZQ(h,T,m,P)??Mh()},C_=async(h,P)=>{if(!EP(h))return Jf();let{path:T}=zm(h),m=qP(T);if(!VP(h))return Qf();let _=await QQ(h,P);return Xf(_,m)};console.log("[Tickets] Edge script module loaded");var JQ=zh(async()=>{console.log("[Tickets] Validating encryption key..."),y_(),console.log("[Tickets] Initializing database..."),await a_(),console.log("[Tickets] Database initialized successfully")});console.log("[Tickets] Registering HTTP handler...");f5.net.http.serve(async(h)=>{try{return await JQ(),C_(h)}catch(P){return console.error("[Tickets] Request error:",P),new Response(JSON.stringify({error:"Internal server error"}),{status:500,headers:{"content-type":"application/json"}})}});console.log("[Tickets] HTTP handler registered");
